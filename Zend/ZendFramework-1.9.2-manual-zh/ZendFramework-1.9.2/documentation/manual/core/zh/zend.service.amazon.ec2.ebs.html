<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>48.10. Zend_Service_Amazon_Ec2: Elastic Block Stroage (EBS)</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="Zend Framework手册 中文版">
<link rel="up" href="zend.service.html" title="第 48 章 Zend_Service">
<link rel="prev" href="zend.service.amazon.ec2.images.html" title="48.9. Zend_Service_Amazon_Ec2: Amazon Machine Images (AMI)">
<link rel="next" href="zend.service.amazon.ec2.elasticip.html" title="48.11. Zend_Service_Amazon_Ec2: Elastic IP Addresses">
<link rel="chapter" href="introduction.html" title="第 1 章 Zend Framework简介">
<link rel="chapter" href="zend.acl.html" title="第 2 章 Zend_Acl">
<link rel="chapter" href="zend.amf.html" title="第 3 章 Zend_Amf">
<link rel="chapter" href="zend.application.html" title="第 4 章 Zend_Application">
<link rel="chapter" href="zend.auth.html" title="第 5 章 Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="第 6 章 Zend_Cache">
<link rel="chapter" href="zend.captcha.html" title="第 7 章 Zend_Captcha">
<link rel="chapter" href="zend.codegenerator.html" title="第 8 章 Zend_CodeGenerator">
<link rel="chapter" href="zend.config.html" title="第 9 章 Zend_Config">
<link rel="chapter" href="zend.config.writer.html" title="第 10 章 Zend_Config_Writer">
<link rel="chapter" href="zend.console.getopt.html" title="第 11 章 Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="第 12 章 Zend_Controller">
<link rel="chapter" href="zend.currency.html" title="第 13 章 Zend_Currency">
<link rel="chapter" href="zend.date.html" title="第 14 章 Zend_Date">
<link rel="chapter" href="zend.db.html" title="第 15 章 Zend_Db">
<link rel="chapter" href="zend.debug.html" title="第 16 章 Zend_Debug">
<link rel="chapter" href="zend.dojo.html" title="第 17 章 Zend_Dojo">
<link rel="chapter" href="zend.dom.html" title="第 18 章 Zend_Dom">
<link rel="chapter" href="zend.exception.html" title="第 19 章 Zend_Exception">
<link rel="chapter" href="zend.feed.html" title="第 20 章 Zend_Feed">
<link rel="chapter" href="zend.file.html" title="第 21 章 Zend_File">
<link rel="chapter" href="zend.filter.html" title="第 22 章 Zend_Filter">
<link rel="chapter" href="zend.form.html" title="第 23 章 Zend_Form">
<link rel="chapter" href="zend.gdata.html" title="第 24 章 Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="第 25 章 Zend_Http">
<link rel="chapter" href="zend.infocard.html" title="第 26 章 Zend_InfoCard">
<link rel="chapter" href="zend.json.html" title="第 27 章 Zend_Json">
<link rel="chapter" href="zend.layout.html" title="第 28 章 Zend_Layout">
<link rel="chapter" href="zend.ldap.html" title="第 29 章 Zend_Ldap">
<link rel="chapter" href="zend.loader.html" title="第 30 章 Zend_Loader">
<link rel="chapter" href="zend.locale.html" title="第 31 章 Zend_Locale">
<link rel="chapter" href="zend.log.html" title="第 32 章 Zend_Log">
<link rel="chapter" href="zend.mail.html" title="第 33 章 Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="第 34 章 Zend_Measure">
<link rel="chapter" href="zend.memory.html" title="第 35 章 Zend_Memory">
<link rel="chapter" href="zend.mime.html" title="第 36 章 Zend_Mime">
<link rel="chapter" href="zend.navigation.html" title="第 37 章 Zend_Navigation">
<link rel="chapter" href="zend.openid.html" title="第 38 章 Zend_OpenId">
<link rel="chapter" href="zend.paginator.html" title="第 39 章 Zend_Paginator">
<link rel="chapter" href="zend.pdf.html" title="第 40 章 Zend_Pdf">
<link rel="chapter" href="zend.progressbar.html" title="第 41 章 Zend_ProgressBar">
<link rel="chapter" href="zend.queue.html" title="第 42 章 Zend_Queue">
<link rel="chapter" href="zend.reflection.html" title="第 43 章 Zend_Reflection">
<link rel="chapter" href="zend.registry.html" title="第 44 章 Zend_Registry">
<link rel="chapter" href="zend.rest.html" title="第 45 章 Zend_Rest">
<link rel="chapter" href="zend.search.lucene.html" title="第 46 章 Zend_Search_Lucene">
<link rel="chapter" href="zend.server.html" title="第 47 章 Zend_Server">
<link rel="chapter" href="zend.service.html" title="第 48 章 Zend_Service">
<link rel="chapter" href="zend.session.html" title="第 49 章 Zend_Session">
<link rel="chapter" href="zend.soap.html" title="第 50 章 Zend_Soap">
<link rel="chapter" href="zend.tag.html" title="第 51 章 Zend_Tag">
<link rel="chapter" href="zend.test.html" title="第 52 章 Zend_Test">
<link rel="chapter" href="zend.text.html" title="第 53 章 Zend_Text">
<link rel="chapter" href="zend.timesync.html" title="第 54 章 Zend_TimeSync">
<link rel="chapter" href="zend.tool.framework.html" title="第 55 章 Zend_Tool_Framework">
<link rel="chapter" href="zend.tool.project.html" title="第 56 章 Zend_Tool_Project">
<link rel="chapter" href="zend.translate.html" title="第 57 章 Zend_Translate">
<link rel="chapter" href="zend.uri.html" title="第 58 章 Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="第 59 章 Zend_Validate">
<link rel="chapter" href="zend.version.html" title="第 60 章 Zend_Version">
<link rel="chapter" href="zend.view.html" title="第 61 章 Zend_View">
<link rel="chapter" href="zend.wildfire.html" title="第 62 章 Zend_Wildfire">
<link rel="chapter" href="zend.xmlrpc.html" title="第 63 章 Zend_XmlRpc">
<link rel="chapter" href="zendx.console.process.unix.html" title="第 64 章 ZendX_Console_Process_Unix">
<link rel="chapter" href="zendx.jquery.html" title="第 65 章 ZendX_JQuery">
<link rel="appendix" href="requirements.html" title="附录 A. 系统需求">
<link rel="appendix" href="coding-standard.html" title="附录 B. Zend Framework 的 PHP 编码标准">
<link rel="appendix" href="doc-standard.html" title="附录 C. Zend Framework Documentation Standard">
<link rel="appendix" href="project-structure.html" title="附录 D. Recommended Project Structure for Zend Framework MVC Applications">
<link rel="appendix" href="performance.html" title="附录 E. Zend Framework Performance Guide">
<link rel="appendix" href="copyrights.html" title="附录 F. 版权信息">
<link rel="index" href="the.index.html" title="索引">
<link rel="subsection" href="zend.service.amazon.ec2.ebs.html#zend.service.amazon.ec2.ebs.creating" title="48.10.1. Create EBS Volumes and Snapshots">
<link rel="subsection" href="zend.service.amazon.ec2.ebs.html#zend.service.amazon.ec2.ebs.describing" title="48.10.2. Describing EBS Volumes and Snapshots">
<link rel="subsection" href="zend.service.amazon.ec2.ebs.html#zend.service.amazon.ec2.ebs.attachdetach" title="48.10.3. Attach and Detaching Volumes from Instances">
<link rel="subsection" href="zend.service.amazon.ec2.ebs.html#zend.service.amazon.ec2.ebs.deleting" title="48.10.4. Deleting EBS Volumes and Snapshots">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">48.10. Zend_Service_Amazon_Ec2: Elastic Block Stroage (EBS)</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.service.amazon.ec2.images.html">上一页</a> </td>
<th width="60%" align="center">第 48 章 Zend_Service</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.service.amazon.ec2.elasticip.html">下一页</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.service.amazon.ec2.ebs"></a>48.10. Zend_Service_Amazon_Ec2: Elastic Block Stroage (EBS)</h2></div></div></div>
<p>
        Amazon Elastic Block Store (Amazon EBS) is a new type of storage
        designed specifically for Amazon EC2 instances. Amazon EBS allows
        you to create volumes that can be mounted as devices by Amazon EC2
        instances. Amazon EBS volumes behave like raw unformatted external
        block devices. They have user supplied device names and provide a block
        device interface. You can load a file system on top of Amazon EBS volumes,
        or use them just as you would use a block device.
    </p>
<p>
        You can create up to twenty Amazon EBS volumes of any size (from one GiB up
        to one TiB). Each Amazon EBS volume can be attached to any Amazon EC2
        instance in the same Availability Zone or can be left unattached.
    </p>
<p>
        Amazon EBS provides the ability to create snapshots of your Amazon EBS volumes
        to Amazon S3. You can use these snapshots as the starting point for new Amazon
        EBS volumes and can protect your data for long term durability.
    </p>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.amazon.ec2.ebs.creating"></a>48.10.1. Create EBS Volumes and Snapshots</h3></div></div></div>
<div class="example">
<a name="zend.service.amazon.ec2.ebs.creating.volume"></a><p class="title"><b>例 48.36. Create a new EBS Volume</b></p>
<div class="example-contents">
<p>
                Creating a brand new EBS Volume requires the size and which zone you
                want the EBS Volume to be in.
            </p>
<p>
                <code class="code">createNewVolume</code> will return an array containing information
                about the new Volume which includes the volumeId, size, zone, status
                and createTime.
            </p>
<pre class="programlisting">
$ec2_ebs = new Zend_Service_Amazon_Ec2_Ebs('aws_key','aws_secret_key');
$return = $ec2_ebs-&gt;createNewVolume(40, 'us-east-1a');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.ebs.creating.volumesnapshot"></a><p class="title"><b>例 48.37. Create an EBS Volume from a Snapshot</b></p>
<div class="example-contents">
<p>
                Creating an EBS Volume from a snapshot requires the snapshot_id and which zone you
                want the EBS Volume to be in.
            </p>
<p>
                <code class="code">createVolumeFromSnapshot</code> will return an array containing information about
                the new Volume which includes the volumeId, size, zone, status, createTime and snapshotId.
            </p>
<pre class="programlisting">
$ec2_ebs = new Zend_Service_Amazon_Ec2_Ebs('aws_key','aws_secret_key');
$return = $ec2_ebs-&gt;createVolumeFromSnapshot('snap-78a54011', 'us-east-1a');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.ebs.creating.snapshot"></a><p class="title"><b>例 48.38. Create a Snapshot of an EBS Volume</b></p>
<div class="example-contents">
<p>
                Creating a Snapshot of an EBS Volume requires the volumeId of the EBS Volume.
            </p>
<p>
                <code class="code">createSnapshot</code> will return an array containing information about the
                new Volume Snapshot which includes the snapshotId, volumeId, status, startTime
                and progress.
            </p>
<pre class="programlisting">
$ec2_ebs = new Zend_Service_Amazon_Ec2_Ebs('aws_key','aws_secret_key');
$return = $ec2_ebs-&gt;createSnapshot('volumeId');
</pre>
</div>
</div>
<br class="example-break">
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.amazon.ec2.ebs.describing"></a>48.10.2. Describing EBS Volumes and Snapshots</h3></div></div></div>
<div class="example">
<a name="zend.service.amazon.ec2.ebs.describing.volume"></a><p class="title"><b>例 48.39. Describing an EBS Volume</b></p>
<div class="example-contents">
<p>
                <code class="code">describeVolume</code> allows you to get information on an EBS Volume or a set of EBS
                Volumes. If nothing is passed in then it will return all EBS Volumes. If only
                one EBS Volume needs to be described a string can be passed in while an array of
                EBS Volume Id's can be passed in to describe them.
            </p>
<p>
                <code class="code">describeVolume</code> will return an array with information about each Volume which
                includes the volumeId, size, status and createTime. If the volume is attached to an instance,
                an addition value of attachmentSet will be returned. The attachment set contains information
                about the instance that the EBS Volume is attached to, which includes volumeId, instanceId,
                device, status and attachTime.
            </p>
<pre class="programlisting">
$ec2_ebs = new Zend_Service_Amazon_Ec2_Ebs('aws_key','aws_secret_key');
$return = $ec2_ebs-&gt;describeVolume('volumeId');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.ebs.describing.attachedvolumes"></a><p class="title"><b>例 48.40. Describe Attached Volumes</b></p>
<div class="example-contents">
<p>
                To return a list of EBS Volumes currently attached to a running instance you can call this method.
                It will only return EBS Volumes attached to the instance with the passed in instanceId.
            </p>
<p>
                <code class="code">describeAttachedVolumes</code> returns the same information as the <code class="code">describeVolume</code>
                but only for the EBS Volumes that are currently attached to the specified instanceId.
            </p>
<pre class="programlisting">
$ec2_ebs = new Zend_Service_Amazon_Ec2_Ebs('aws_key','aws_secret_key');
$return = $ec2_ebs-&gt;describeAttachedVolumes('instanceId');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.ebs.describing.snapshot"></a><p class="title"><b>例 48.41. Describe an EBS Volume Snapshot</b></p>
<div class="example-contents">
<p>
                <code class="code">describeSnapshot</code> allows you to get information on an EBS Volume Snapshot
                or a set of EBS Volume Snapshots. If nothing is passed in then it will return information
                about all EBS Volume Snapshots. If only one EBS Volume Snapshot needs to be described its
                snapshotId can be passed in while an array of EBS Volume Snapshot Id's can be passed in to
                describe them.
            </p>
<p>
                <code class="code">describeSnapshot</code> will return an array containing information about each EBS Volume Snapshot
                which includes the snapshotId, volumeId, status, startTime and progress.
            </p>
<pre class="programlisting">
$ec2_ebs = new Zend_Service_Amazon_Ec2_Ebs('aws_key','aws_secret_key');
$return = $ec2_ebs-&gt;describeSnapshot('volumeId');
</pre>
</div>
</div>
<br class="example-break">
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.amazon.ec2.ebs.attachdetach"></a>48.10.3. Attach and Detaching Volumes from Instances</h3></div></div></div>
<div class="example">
<a name="zend.service.amazon.ec2.ebs.attachdetach.attach"></a><p class="title"><b>例 48.42. Attaching an EBS Volume</b></p>
<div class="example-contents">
<p>
                <code class="code">attachVolume</code> will attach an EBS Volume to a running Instance. To
                attach a volume you need to specify the volumeId, the instanceId and the
                device <span class="emphasis"><em>(ex: /dev/sdh)</em></span>.
            </p>
<p>
                <code class="code">attachVolume</code> will return an array with information about the
                attach status which contains volumeId, instanceId, device, status and
                attachTime
            </p>
<pre class="programlisting">
$ec2_ebs = new Zend_Service_Amazon_Ec2_Ebs('aws_key','aws_secret_key');
$return = $ec2_ebs-&gt;attachVolume('volumeId', 'instanceid', '/dev/sdh');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.ebs.attachdetach.detach"></a><p class="title"><b>例 48.43. Detaching an EBS Volume</b></p>
<div class="example-contents">
<p>
                <code class="code">detachVolume</code> will detach an EBS Volume from a running Instance.
                <code class="code">detachVolume</code> requires that you specify the volumeId with the optional
                instanceId and device name that was passed when attaching the volume. If you need to
                force the detachment you can set the forth parameter to be true and it will force
                the volume to detach.
            </p>
<p>
                <code class="code">detachVolume</code> returns an array containing status information about
                the EBS Volume which includes volumeId, instanceId, device, status and attachTime.
            </p>
<pre class="programlisting">
$ec2_ebs = new Zend_Service_Amazon_Ec2_Ebs('aws_key','aws_secret_key');
$return = $ec2_ebs-&gt;detachVolume('volumeId');
</pre>
</div>
</div>
<br class="example-break"><div class="note"><table border="0" summary="Note: Forced Detach">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">Forced Detach</th>
</tr>
<tr><td align="left" valign="top"><p>
                You should only force a detach if the previous detachment attempt did not occur
                cleanly (logging into an instance, unmounting the volume, and detaching normally).
                This option can lead to data loss or a corrupted file system. Use this option
                only as a last resort to detach a volume from a failed instance. The instance
                will not have an opportunity to flush file system caches or file system meta
                data. If you use this option, you must perform file system check and repair
                procedures.
            </p></td></tr>
</table></div>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.amazon.ec2.ebs.deleting"></a>48.10.4. Deleting EBS Volumes and Snapshots</h3></div></div></div>
<div class="example">
<a name="zend.service.amazon.ec2.ebs.deleting.volume"></a><p class="title"><b>例 48.44. Deleting an EBS Volume</b></p>
<div class="example-contents">
<p>
                <code class="code">deleteVolume</code> will delete an unattached EBS Volume.
            </p>
<p>
                <code class="code">deleteVolume</code> will return boolean true or false.
            </p>
<pre class="programlisting">
$ec2_ebs = new Zend_Service_Amazon_Ec2_Ebs('aws_key','aws_secret_key');
$return = $ec2_ebs-&gt;deleteVolume('volumeId');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.ebs.deleting.snapshot"></a><p class="title"><b>例 48.45. Deleting an EBS Volume Snapshot</b></p>
<div class="example-contents">
<p>
                <code class="code">deleteSnapshot</code> will delete an EBS Volume Snapshot.
            </p>
<p>
                <code class="code">deleteSnapshot</code> returns booleen true or false.
            </p>
<pre class="programlisting">
$ec2_ebs = new Zend_Service_Amazon_Ec2_Ebs('aws_key','aws_secret_key');
$return = $ec2_ebs-&gt;deleteSnapshot('snapshotId');
</pre>
</div>
</div>
<br class="example-break">
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.service.amazon.ec2.images.html">上一页</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.service.html">上一级</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.service.amazon.ec2.elasticip.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">48.9. Zend_Service_Amazon_Ec2: Amazon Machine Images (AMI) </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top"> 48.11. Zend_Service_Amazon_Ec2: Elastic IP Addresses</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
