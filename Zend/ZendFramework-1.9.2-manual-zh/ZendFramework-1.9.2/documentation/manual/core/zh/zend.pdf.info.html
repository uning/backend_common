<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>40.7. Document Info and Metadata</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="Zend Framework手册 中文版">
<link rel="up" href="zend.pdf.html" title="第 40 章 Zend_Pdf">
<link rel="prev" href="zend.pdf.interactive-features.html" title="40.6. Interactive Features">
<link rel="next" href="zend.pdf.usage.html" title="40.8. Zend_Pdf module usage example">
<link rel="chapter" href="introduction.html" title="第 1 章 Zend Framework简介">
<link rel="chapter" href="zend.acl.html" title="第 2 章 Zend_Acl">
<link rel="chapter" href="zend.amf.html" title="第 3 章 Zend_Amf">
<link rel="chapter" href="zend.application.html" title="第 4 章 Zend_Application">
<link rel="chapter" href="zend.auth.html" title="第 5 章 Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="第 6 章 Zend_Cache">
<link rel="chapter" href="zend.captcha.html" title="第 7 章 Zend_Captcha">
<link rel="chapter" href="zend.codegenerator.html" title="第 8 章 Zend_CodeGenerator">
<link rel="chapter" href="zend.config.html" title="第 9 章 Zend_Config">
<link rel="chapter" href="zend.config.writer.html" title="第 10 章 Zend_Config_Writer">
<link rel="chapter" href="zend.console.getopt.html" title="第 11 章 Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="第 12 章 Zend_Controller">
<link rel="chapter" href="zend.currency.html" title="第 13 章 Zend_Currency">
<link rel="chapter" href="zend.date.html" title="第 14 章 Zend_Date">
<link rel="chapter" href="zend.db.html" title="第 15 章 Zend_Db">
<link rel="chapter" href="zend.debug.html" title="第 16 章 Zend_Debug">
<link rel="chapter" href="zend.dojo.html" title="第 17 章 Zend_Dojo">
<link rel="chapter" href="zend.dom.html" title="第 18 章 Zend_Dom">
<link rel="chapter" href="zend.exception.html" title="第 19 章 Zend_Exception">
<link rel="chapter" href="zend.feed.html" title="第 20 章 Zend_Feed">
<link rel="chapter" href="zend.file.html" title="第 21 章 Zend_File">
<link rel="chapter" href="zend.filter.html" title="第 22 章 Zend_Filter">
<link rel="chapter" href="zend.form.html" title="第 23 章 Zend_Form">
<link rel="chapter" href="zend.gdata.html" title="第 24 章 Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="第 25 章 Zend_Http">
<link rel="chapter" href="zend.infocard.html" title="第 26 章 Zend_InfoCard">
<link rel="chapter" href="zend.json.html" title="第 27 章 Zend_Json">
<link rel="chapter" href="zend.layout.html" title="第 28 章 Zend_Layout">
<link rel="chapter" href="zend.ldap.html" title="第 29 章 Zend_Ldap">
<link rel="chapter" href="zend.loader.html" title="第 30 章 Zend_Loader">
<link rel="chapter" href="zend.locale.html" title="第 31 章 Zend_Locale">
<link rel="chapter" href="zend.log.html" title="第 32 章 Zend_Log">
<link rel="chapter" href="zend.mail.html" title="第 33 章 Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="第 34 章 Zend_Measure">
<link rel="chapter" href="zend.memory.html" title="第 35 章 Zend_Memory">
<link rel="chapter" href="zend.mime.html" title="第 36 章 Zend_Mime">
<link rel="chapter" href="zend.navigation.html" title="第 37 章 Zend_Navigation">
<link rel="chapter" href="zend.openid.html" title="第 38 章 Zend_OpenId">
<link rel="chapter" href="zend.paginator.html" title="第 39 章 Zend_Paginator">
<link rel="chapter" href="zend.pdf.html" title="第 40 章 Zend_Pdf">
<link rel="chapter" href="zend.progressbar.html" title="第 41 章 Zend_ProgressBar">
<link rel="chapter" href="zend.queue.html" title="第 42 章 Zend_Queue">
<link rel="chapter" href="zend.reflection.html" title="第 43 章 Zend_Reflection">
<link rel="chapter" href="zend.registry.html" title="第 44 章 Zend_Registry">
<link rel="chapter" href="zend.rest.html" title="第 45 章 Zend_Rest">
<link rel="chapter" href="zend.search.lucene.html" title="第 46 章 Zend_Search_Lucene">
<link rel="chapter" href="zend.server.html" title="第 47 章 Zend_Server">
<link rel="chapter" href="zend.service.html" title="第 48 章 Zend_Service">
<link rel="chapter" href="zend.session.html" title="第 49 章 Zend_Session">
<link rel="chapter" href="zend.soap.html" title="第 50 章 Zend_Soap">
<link rel="chapter" href="zend.tag.html" title="第 51 章 Zend_Tag">
<link rel="chapter" href="zend.test.html" title="第 52 章 Zend_Test">
<link rel="chapter" href="zend.text.html" title="第 53 章 Zend_Text">
<link rel="chapter" href="zend.timesync.html" title="第 54 章 Zend_TimeSync">
<link rel="chapter" href="zend.tool.framework.html" title="第 55 章 Zend_Tool_Framework">
<link rel="chapter" href="zend.tool.project.html" title="第 56 章 Zend_Tool_Project">
<link rel="chapter" href="zend.translate.html" title="第 57 章 Zend_Translate">
<link rel="chapter" href="zend.uri.html" title="第 58 章 Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="第 59 章 Zend_Validate">
<link rel="chapter" href="zend.version.html" title="第 60 章 Zend_Version">
<link rel="chapter" href="zend.view.html" title="第 61 章 Zend_View">
<link rel="chapter" href="zend.wildfire.html" title="第 62 章 Zend_Wildfire">
<link rel="chapter" href="zend.xmlrpc.html" title="第 63 章 Zend_XmlRpc">
<link rel="chapter" href="zendx.console.process.unix.html" title="第 64 章 ZendX_Console_Process_Unix">
<link rel="chapter" href="zendx.jquery.html" title="第 65 章 ZendX_JQuery">
<link rel="appendix" href="requirements.html" title="附录 A. 系统需求">
<link rel="appendix" href="coding-standard.html" title="附录 B. Zend Framework 的 PHP 编码标准">
<link rel="appendix" href="doc-standard.html" title="附录 C. Zend Framework Documentation Standard">
<link rel="appendix" href="project-structure.html" title="附录 D. Recommended Project Structure for Zend Framework MVC Applications">
<link rel="appendix" href="performance.html" title="附录 E. Zend Framework Performance Guide">
<link rel="appendix" href="copyrights.html" title="附录 F. 版权信息">
<link rel="index" href="the.index.html" title="索引">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">40.7. Document Info and Metadata</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.pdf.interactive-features.html">上一页</a> </td>
<th width="60%" align="center">第 40 章 Zend_Pdf</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.pdf.usage.html">下一页</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.pdf.info"></a>40.7. Document Info and Metadata</h2></div></div></div>
<p>
        A <acronym class="acronym">PDF</acronym> document may include general information such as the document's title,
        author, and creation and modification dates.
    </p>
<p>
        Historically this information is stored using special Info structure. This structure
        is available for read and writing as an associative array using <code class="code">properties</code> public property
        of <code class="classname">Zend_Pdf</code> objects:
            </p>
<pre class="programlisting">
$pdf = Zend_Pdf::load($pdfPath);

echo $pdf-&gt;properties['Title'] . "\n";
echo $pdf-&gt;properties['Author'] . "\n";

$pdf-&gt;properties['Title'] = 'New Title.';
$pdf-&gt;save($pdfPath);
</pre>
<p>

    </p>
<p>
        The following keys are defined by <acronym class="acronym">PDF</acronym> v1.4 (Acrobat 5) standard:

        </p>
<div class="itemizedlist"><ul type="disc">
<li><p>
                    <span class="emphasis"><em>Title</em></span> - string, optional, the document's title.
                </p></li>
<li><p>
                    <span class="emphasis"><em>Author</em></span> - string, optional, the name of the person who created the document.
                </p></li>
<li><p>
                    <span class="emphasis"><em>Subject</em></span> - string, optional, the subject of the document.
                </p></li>
<li><p>
                    <span class="emphasis"><em>Keywords</em></span> - string, optional, keywords associated with the document.
                </p></li>
<li><p>
                    <span class="emphasis"><em>Creator</em></span> - string, optional, if the document was converted to <acronym class="acronym">PDF</acronym> from another format,
                    the name of the application (for example, Adobe FrameMaker®) that created the original document from which
                    it was converted.
                </p></li>
<li><p>
                    <span class="emphasis"><em>Producer</em></span> - string, optional, if the document was converted to <acronym class="acronym">PDF</acronym> from another format, the
                    name of the application (for example, Acrobat Distiller) that converted it to <acronym class="acronym">PDF</acronym>..
                </p></li>
<li>
<p>
                    <span class="emphasis"><em>CreationDate</em></span> - string, optional, the date and time the document was created, in the following form:
                    "D:YYYYMMDDHHmmSSOHH'mm'", where:
                    </p>
<div class="itemizedlist"><ul type="circle">
<li><p>
                                <span class="emphasis"><em>YYYY</em></span> is the year.
                            </p></li>
<li><p>
                                <span class="emphasis"><em>MM</em></span> is the month.
                            </p></li>
<li><p>
                                <span class="emphasis"><em>DD</em></span> is the day (01–31).
                            </p></li>
<li><p>
                                <span class="emphasis"><em>HH</em></span> is the hour (00–23).
                            </p></li>
<li><p>
                                <span class="emphasis"><em>mm</em></span>is the minute (00–59).
                            </p></li>
<li><p>
                                <span class="emphasis"><em>SS</em></span> is the second (00–59).
                            </p></li>
<li><p>
                                <span class="emphasis"><em>O</em></span> is the relationship of local time to Universal Time (UT),
                                denoted by one of the characters +, −, or Z (see below).
                            </p></li>
<li><p>
                                <span class="emphasis"><em>HH</em></span> followed by ' is the absolute value of the offset from UT in hours (00–23).
                            </p></li>
<li><p>
                                <span class="emphasis"><em>mm</em></span> followed by ' is the absolute value of the offset from UT in minutes (00–59).
                            </p></li>
</ul></div>
<p>
                    The apostrophe character (') after HH and mm is part of the syntax. All fields after
                    the year are optional. (The prefix D:, although also optional, is strongly recommended.)
                    The default values for MM and DD are both 01; all other numerical
                    fields default to zero values. A plus sign (+) as the value of the O field signifies that
                    local time is later than UT, a minus sign (−) that local time is earlier than UT, and
                    the letter Z that local time is equal to UT. If no UT information is specified, the
                    relationship of the specified time to UT is considered to be unknown. Whether or
                    not the time zone is known, the rest of the date should be specified in local time.
                </p>
<p>
                    For example, December 23, 1998, at 7:52 PM, U.S. Pacific Standard Time, is represented
                    by the string "D:199812231952−08'00'".
                </p>
</li>
<li><p>
                    <span class="emphasis"><em>ModDate</em></span> - string, optional, the date and time the document was most recently
                    modified, in the same form as <span class="emphasis"><em>CreationDate</em></span>.
                </p></li>
<li>
<p>
                    <span class="emphasis"><em>Trapped</em></span> - boolean, optional, indicates whether the document has
                    been modified to include trapping information.
                    </p>
<div class="itemizedlist"><ul type="circle">
<li><p>
                                <span class="emphasis"><em>true</em></span> - The document has been fully trapped; no further trapping is needed.
                            </p></li>
<li><p>
                                <span class="emphasis"><em>false</em></span> - The document has not yet been trapped; any desired trapping must still be done.
                            </p></li>
<li><p>
                                <span class="emphasis"><em>null</em></span> - Either it is unknown whether the document has been
                                trapped or it has been partly but not yet fully trapped; some
                                additional trapping may still be needed.
                            </p></li>
</ul></div>
<p>
                </p>
</li>
</ul></div>
<p>
    </p>
<p>
        Since <acronym class="acronym">PDF</acronym> v 1.6 metadata can be stored in the special <acronym class="acronym">XML</acronym> document attached to the <acronym class="acronym">PDF</acronym>
        (XMP - <a href="http://www.adobe.com/products/xmp/" target="_top">Extensible Metadata Platform</a>).
    </p>
<p>
        This XML document can be retrieved and attached to the PDF with <code class="methodname">Zend_Pdf::getMetadata()</code> and
        <code class="methodname">Zend_Pdf::setMetadata($metadata)</code> methods:
            </p>
<pre class="programlisting">
$pdf = Zend_Pdf::load($pdfPath);
$metadata = $pdf-&gt;getMetadata();
$metadataDOM = new DOMDocument();
$metadataDOM-&gt;loadXML($metadata);

$xpath = new DOMXPath($metadataDOM);
$pdfPreffixNamespaceURI = $xpath-&gt;query('/rdf:RDF/rdf:Description')
                                -&gt;item(0)
                                -&gt;lookupNamespaceURI('pdf');
$xpath-&gt;registerNamespace('pdf', $pdfPreffixNamespaceURI);

$titleNode = $xpath-&gt;query('/rdf:RDF/rdf:Description/pdf:Title')-&gt;item(0);
$title = $titleNode-&gt;nodeValue;
...

$titleNode-&gt;nodeValue = 'New title';
$pdf-&gt;setMetadata($metadataDOM-&gt;saveXML());
$pdf-&gt;save($pdfPath);
</pre>
<p>
    </p>
<p>
        Common document properties are duplicated in the Info structure and Metadata document (if presented).
        It's user application responsibility now to keep them synchronized.
    </p>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.pdf.interactive-features.html">上一页</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.pdf.html">上一级</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.pdf.usage.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">40.6. Interactive Features </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top"> 40.8. Zend_Pdf module usage example</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
