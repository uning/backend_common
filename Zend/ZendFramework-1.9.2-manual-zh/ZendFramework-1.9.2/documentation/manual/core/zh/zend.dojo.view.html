<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>17.3. Dojo 视图助手</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="Zend Framework手册 中文版">
<link rel="up" href="zend.dojo.html" title="第 17 章 Zend_Dojo">
<link rel="prev" href="zend.dojo.data.html" title="17.2. Zend_Dojo_Data: dojo.data Envelopes">
<link rel="next" href="zend.dojo.form.html" title="17.4. Dojo 表单元素和装饰器">
<link rel="chapter" href="introduction.html" title="第 1 章 Zend Framework简介">
<link rel="chapter" href="zend.acl.html" title="第 2 章 Zend_Acl">
<link rel="chapter" href="zend.amf.html" title="第 3 章 Zend_Amf">
<link rel="chapter" href="zend.application.html" title="第 4 章 Zend_Application">
<link rel="chapter" href="zend.auth.html" title="第 5 章 Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="第 6 章 Zend_Cache">
<link rel="chapter" href="zend.captcha.html" title="第 7 章 Zend_Captcha">
<link rel="chapter" href="zend.codegenerator.html" title="第 8 章 Zend_CodeGenerator">
<link rel="chapter" href="zend.config.html" title="第 9 章 Zend_Config">
<link rel="chapter" href="zend.config.writer.html" title="第 10 章 Zend_Config_Writer">
<link rel="chapter" href="zend.console.getopt.html" title="第 11 章 Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="第 12 章 Zend_Controller">
<link rel="chapter" href="zend.currency.html" title="第 13 章 Zend_Currency">
<link rel="chapter" href="zend.date.html" title="第 14 章 Zend_Date">
<link rel="chapter" href="zend.db.html" title="第 15 章 Zend_Db">
<link rel="chapter" href="zend.debug.html" title="第 16 章 Zend_Debug">
<link rel="chapter" href="zend.dojo.html" title="第 17 章 Zend_Dojo">
<link rel="chapter" href="zend.dom.html" title="第 18 章 Zend_Dom">
<link rel="chapter" href="zend.exception.html" title="第 19 章 Zend_Exception">
<link rel="chapter" href="zend.feed.html" title="第 20 章 Zend_Feed">
<link rel="chapter" href="zend.file.html" title="第 21 章 Zend_File">
<link rel="chapter" href="zend.filter.html" title="第 22 章 Zend_Filter">
<link rel="chapter" href="zend.form.html" title="第 23 章 Zend_Form">
<link rel="chapter" href="zend.gdata.html" title="第 24 章 Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="第 25 章 Zend_Http">
<link rel="chapter" href="zend.infocard.html" title="第 26 章 Zend_InfoCard">
<link rel="chapter" href="zend.json.html" title="第 27 章 Zend_Json">
<link rel="chapter" href="zend.layout.html" title="第 28 章 Zend_Layout">
<link rel="chapter" href="zend.ldap.html" title="第 29 章 Zend_Ldap">
<link rel="chapter" href="zend.loader.html" title="第 30 章 Zend_Loader">
<link rel="chapter" href="zend.locale.html" title="第 31 章 Zend_Locale">
<link rel="chapter" href="zend.log.html" title="第 32 章 Zend_Log">
<link rel="chapter" href="zend.mail.html" title="第 33 章 Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="第 34 章 Zend_Measure">
<link rel="chapter" href="zend.memory.html" title="第 35 章 Zend_Memory">
<link rel="chapter" href="zend.mime.html" title="第 36 章 Zend_Mime">
<link rel="chapter" href="zend.navigation.html" title="第 37 章 Zend_Navigation">
<link rel="chapter" href="zend.openid.html" title="第 38 章 Zend_OpenId">
<link rel="chapter" href="zend.paginator.html" title="第 39 章 Zend_Paginator">
<link rel="chapter" href="zend.pdf.html" title="第 40 章 Zend_Pdf">
<link rel="chapter" href="zend.progressbar.html" title="第 41 章 Zend_ProgressBar">
<link rel="chapter" href="zend.queue.html" title="第 42 章 Zend_Queue">
<link rel="chapter" href="zend.reflection.html" title="第 43 章 Zend_Reflection">
<link rel="chapter" href="zend.registry.html" title="第 44 章 Zend_Registry">
<link rel="chapter" href="zend.rest.html" title="第 45 章 Zend_Rest">
<link rel="chapter" href="zend.search.lucene.html" title="第 46 章 Zend_Search_Lucene">
<link rel="chapter" href="zend.server.html" title="第 47 章 Zend_Server">
<link rel="chapter" href="zend.service.html" title="第 48 章 Zend_Service">
<link rel="chapter" href="zend.session.html" title="第 49 章 Zend_Session">
<link rel="chapter" href="zend.soap.html" title="第 50 章 Zend_Soap">
<link rel="chapter" href="zend.tag.html" title="第 51 章 Zend_Tag">
<link rel="chapter" href="zend.test.html" title="第 52 章 Zend_Test">
<link rel="chapter" href="zend.text.html" title="第 53 章 Zend_Text">
<link rel="chapter" href="zend.timesync.html" title="第 54 章 Zend_TimeSync">
<link rel="chapter" href="zend.tool.framework.html" title="第 55 章 Zend_Tool_Framework">
<link rel="chapter" href="zend.tool.project.html" title="第 56 章 Zend_Tool_Project">
<link rel="chapter" href="zend.translate.html" title="第 57 章 Zend_Translate">
<link rel="chapter" href="zend.uri.html" title="第 58 章 Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="第 59 章 Zend_Validate">
<link rel="chapter" href="zend.version.html" title="第 60 章 Zend_Version">
<link rel="chapter" href="zend.view.html" title="第 61 章 Zend_View">
<link rel="chapter" href="zend.wildfire.html" title="第 62 章 Zend_Wildfire">
<link rel="chapter" href="zend.xmlrpc.html" title="第 63 章 Zend_XmlRpc">
<link rel="chapter" href="zendx.console.process.unix.html" title="第 64 章 ZendX_Console_Process_Unix">
<link rel="chapter" href="zendx.jquery.html" title="第 65 章 ZendX_JQuery">
<link rel="appendix" href="requirements.html" title="附录 A. 系统需求">
<link rel="appendix" href="coding-standard.html" title="附录 B. Zend Framework 的 PHP 编码标准">
<link rel="appendix" href="doc-standard.html" title="附录 C. Zend Framework Documentation Standard">
<link rel="appendix" href="project-structure.html" title="附录 D. Recommended Project Structure for Zend Framework MVC Applications">
<link rel="appendix" href="performance.html" title="附录 E. Zend Framework Performance Guide">
<link rel="appendix" href="copyrights.html" title="附录 F. 版权信息">
<link rel="index" href="the.index.html" title="索引">
<link rel="subsection" href="zend.dojo.view.html#zend.dojo.view.dojo" title="17.3.1. dojo() 视图助手">
<link rel="subsection" href="zend.dojo.view.html#zend.dojo.view.dijit" title="17.3.2. Dijit-Specific 视图助手">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">17.3. Dojo 视图助手</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.dojo.data.html">上一页</a> </td>
<th width="60%" align="center">第 17 章 Zend_Dojo</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.dojo.form.html">下一页</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.dojo.view"></a>17.3. Dojo 视图助手</h2></div></div></div>
<p>
        Zend Framework 提供下列 Dojo-specific 视图助手：
    </p>
<div class="itemizedlist"><ul type="disc"><li><p>
            <span class="emphasis"><em>dojo():</em></span> 给你的页面设置 Dojo 环境，
            包括 dojo 配置值、定制模块路径、模块请求语句、主题风格、是否使用 CDN 等等。
        </p></li></ul></div>
<div class="example">
<a name="zend.dojo.view.setup"></a><p class="title"><b>例 17.6. 使用 Dojo 视图助手</b></p>
<div class="example-contents">
<p>
            为了使用 Dojo 视图助手，你需要告诉视图对象到哪里去找它们，调用
            <code class="code">addHelperPath()</code>：
        </p>
<pre class="programlisting">
$view-&gt;addHelperPath('Zend/Dojo/View/Helper/', 'Zend_Dojo_View_Helper');

        </pre>
<p>
            另外，你也可以使用 <code class="code">Zend_Dojo</code> 的
            <code class="code">enableView()</code> 方法来做：
        </p>
<pre class="programlisting">
Zend_Dojo::enableView($view);

        </pre>
</div>
</div>
<br class="example-break"><div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.dojo.view.dojo"></a>17.3.1. dojo() 视图助手</h3></div></div></div>
<p>
        <code class="code">dojo()</code> 视图助手用来简化设置 Dojo 环境，包括下列职责:
    </p>
<div class="itemizedlist"><ul type="disc">
<li><p>指定一个 CDN 或一个本地路径给 Dojo 安装。</p></li>
<li><p>指定路径给定制的 Dojo 模块。</p></li>
<li><p>指定 dojo.require 语句。</p></li>
<li><p>指定 dijit 风格主题来使用。 </p></li>
<li><p>指定 dojo.addOnLoad() 事件。</p></li>
</ul></div>
<p>
        <code class="code">dojo()</code> 视图助手实现是占位符实现的一个范例；数据集在视图对象之间持久，
        并可能从布局脚本被直接显示。
    </p>
<div class="example">
<a name="zend.dojo.view.dojo.usage"></a><p class="title"><b>例 17.7. dojo() 视图助手用法范例</b></p>
<div class="example-contents">
<p>
            对本范例，假设开发者将从本地路径使用 Dojo 表单，需要请求若干个 dijits，
            并将使用 Tundra dijit 主题。
        </p>
<p>
            在许多页面上，开发者可能根本不使用 Dojo。所以，我们集中精力在需要 Dojo 的视图脚本上，
            然后是布局脚本，在那里，我们将设置一个 Dojo 环境和解析它。
        </p>
<p>
            首先，我们需要告诉视图对象使用 Dojo 视图助手路径。这可以在引导文件里或早期运行的插件里做；
            简单地抓取你的视图对象并执行下列代码：
        </p>
<pre class="programlisting">
$view-&gt;addHelperPath('Zend/Dojo/View/Helper/', 'Zend_Dojo_View_Helper');
</pre>
<p>
            接着是视图脚本。在本例中，我们打算指定使用 FilteringSelect － 它需要基于 QueryReadStore 的定制的存储，
            我们将调用 'PairedStore' 并存储到我们的 'custom' 模块。
        </p>
<pre class="programlisting">
&lt;? // setup data store for FilteringSelect ?&gt;
&lt;div dojoType="custom.PairedStore" jsId="stateStore"
    url="/data/autocomplete/type/state/format/ajax"
    requestMethod="get"&gt;&lt;/div&gt;

&lt;? // Input element: ?&gt;
State: &lt;input id="state" dojoType="dijit.form.FilteringSelect"
    store="stateStore" pageSize="5" /&gt;

&lt;? // setup required dojo elements:
$this-&gt;dojo()-&gt;enable()
             -&gt;setDjConfigOption('parseOnLoad', true)
             -&gt;registerModulePath('../custom/')
             -&gt;requireModule('dijit.form.FilteringSelect')
             -&gt;requireModule('custom.PairedStore');
</pre>
<p>
            在布局脚本中，我们接着检查是否开启了 Dojo，如果是，我们将做一些基本配置和组装：
        </p>
<pre class="programlisting">
&lt;?= $this-&gt;doctype() ?&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;?= $this-&gt;headTitle() ?&gt;
    &lt;?= $this-&gt;headMeta() ?&gt;
    &lt;?= $this-&gt;headLink() ?&gt;
    &lt;?= $this-&gt;headStyle() ?&gt;
&lt;? if ($this-&gt;dojo()-&gt;isEnabled()):
    $this-&gt;dojo()-&gt;setLocalPath('/js/dojo/dojo.js')
                 -&gt;addStyleSheetModule('dijit.themes.tundra');
    echo $this-&gt;dojo();
?&gt;
    &lt;?= $this-&gt;headScript() ?&gt;
&lt;/head&gt;
&lt;body class="tundra"&gt;
    &lt;?= $this-&gt;layout()-&gt;content ?&gt;
    &lt;?= $this-&gt;inlineScript() ?&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
<p>
            在这点上，你只需要确保你的文件在正确的位置并且你已经为 FilteringSelect 创建了终点动作！
        </p>
</div>
</div>
<br class="example-break"><div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.dojo.view.dojo.declarative"></a>17.3.1.1.  Dojo 的 Programmatic 和 Declarative 用法</h4></div></div></div>
<p>
            Dojo 在其许多功能上使用 <span class="emphasis"><em>declarative</em></span> 和
            <span class="emphasis"><em>programmatic</em></span>。
            <span class="emphasis"><em>Declarative</em></span> 用法使用标准的带有当页面加载时解析的非标准属性的 HTML 元素。
            虽然强大并且语法简单，对大多数开发者来说，它在页面校验时容易出问题。
        </p>
<p>
            <span class="emphasis"><em>Programmatic</em></span> 用法让开发者通过用ID或 CSS 选择器把它们来出来并解析
            到合适的在 Dojo 里的对象构造器来装饰存在的元素。因为没有使用非标准 HTML 属性，页面可以继续校验。
        </p>
<p>
            在实践中，当禁止 javascript 或不能获取部分 Dojo 脚本资源，上述两个用例都考虑了完美的降级。
            为提升标准和文档校验， Zend Framework 缺省使用 programmatic 用法，各种
            视图助手将生成 javascript 并压到 <code class="code">dojo()</code> 视图助手，在解析时包含。
        </p>
<p>
            用这个技术的开发者可能也想探索写自己的页面 programmatic 装饰器。
            一个好处是可以指定 dijit 事件的句柄。
        </p>
<p>
            为使用此功能，同时也使用 declarative 语法，有许多静态方法可以全局使用。
        </p>
<div class="example">
<a name="zend.dojo.view.dojo.declarative.usage"></a><p class="title"><b>例 17.8. 指定 Declarative 和 Programmatic Dojo 用法范例</b></p>
<div class="example-contents">
<p>
                为指定 declarative 用法，简单地调用静态方法
                <code class="code">setUseDeclarative()</code>：
            </p>
<pre class="programlisting">
Zend_Dojo_View_Helper_Dojo::setUseDeclarative();
</pre>
<p>
                如果你决定使用 programmatic 用法，调用静态方法
                <code class="code">setUseProgrammatic()</code>：
            </p>
<pre class="programlisting">
Zend_Dojo_View_Helper_Dojo::setUseProgrammatic();
</pre>
<p>
                最后，如果你想生成自己的 programmatic 规则，你应当指定 programmatic 用法，
                但是传递值 '-1'；在这种情况下，不生成用于装饰 dijit 的 javascript。
            </p>
<pre class="programlisting">
Zend_Dojo_View_Helper_Dojo::setUseProgrammatic(-1);
</pre>
</div>
</div>
<br class="example-break">
</div>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.dojo.view.dojo.themes"></a>17.3.1.2. 主题</h4></div></div></div>
<p>
            Dojo 允许为它的 dijits（小部件）生成主题。你可以通过传递模块路径来选择一个：
        </p>
<pre class="programlisting">
$view-&gt;dojo()-&gt;addStylesheetModule('dijit.themes.tundra');
</pre>
<p>
            模块路径通过使用字符 '.'作为目录分隔符和在主题目录里列表中最后的值作为CSS文件的名称来找出。
            在上述例子中，Dojo 在 'dijit/themes/tundra/tundra.css' 中寻找主题。
        </p>
<p>
            当使用主题时，记住传递主题类很重要，至少，传递在你使用的 dijits 周围的容器；
            最常用的用例是在 body 里传递它：
        </p>
<pre class="programlisting">
&lt;body class="tundra"&gt;
</pre>
</div>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.dojo.view.dojo.layers"></a>17.3.1.3. 使用 Layers （定制）</h4></div></div></div>
<p>
            缺省地，当你使用 dojo.require 语句，dojo 将请求服务器抓取适当的 javascript 文件。
            如果你有许多 dijits ，将导致许多对服务器请求，－ 这不是很理想。
        </p>
<p>
            Dojo 的解决方案是提供生成 <span class="emphasis"><em>定制</em></span> 的能力，定制做如下事情：
        </p>
<div class="itemizedlist"><ul type="disc">
<li><p>
                把请求文件集中到 <span class="emphasis"><em>layers</em></span>，layer 把所有的请求
                文件集中成一个单个的 JS 文件。（Hence the name of this section.）
            </p></li>
<li><p>
                "Interns" non-javascript files used by dijits (typically,
                template files). These are also grouped in the same JS file as
                the layer.
            </p></li>
<li><p>
                通过 ShrinkSafe 传递文件，它剥离了空白字符和注释，还缩短了短变量名。
            </p></li>
</ul></div>
<p>
            有些文件不能被 layered，但定制处理将生成一个特别的目录来放 layer 文件和其它所有文件。
            这会对你的站点或应用需求减少发行定制。
        </p>
<p>
            为了使用 layer，<code class="code">dojo()</code> 视图助手有一个
            <code class="code">addLayer()</code> 方法来添加路径到请求 layers:
        </p>
<pre class="programlisting">
$view-&gt;dojo()-&gt;addLayer('/js/foo/foo.js');
</pre>
<p>
            更多关于生成定制的信息，请 <a href="http://dojotoolkit.org/book/dojo-book-0-9/part-4-meta-dojo/package-system-and-custom-builds" target="_top">refer
            参考 Dojo 构造文档</a>.
        </p>
</div>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.dojo.view.dojo.methods"></a>17.3.1.4. 可用方法</h4></div></div></div>
<p>
            <code class="code">dojo()</code> 视图助手总返回 dojo 占位符容器的实例。
            这容器对象有下列方法可用：
        </p>
<div class="itemizedlist"><ul type="disc">
<li><p><code class="code">setView(Zend_View_Interface $view)</code>:
                    在容器中设置一个视图实例。</p></li>
<li><p><code class="code">enable()</code>: 显式地开启 Dojo
                    集成。</p></li>
<li><p><code class="code">disable()</code>: 关闭 Dojo
                    集成。</p></li>
<li><p><code class="code">isEnabled()</code>: 确定是否
                    Dojo 集成已经开启。</p></li>
<li><p><code class="code">requireModule($module)</code>: 设置一条
                    <code class="code">dojo.require</code> 语句。</p></li>
<li><p><code class="code">getModules()</code>: 确定模块
                    已经被请求。</p></li>
<li><p><code class="code">registerModulePath($module, $path)</code>:
                    注册一个定制的 Dojo 模块路径。</p></li>
<li><p><code class="code">getModulePaths()</code>:
                    获得已注册模块路径列表。</p></li>
<li><p><code class="code">addLayer($path)</code>: 添加一个 layer （定制）
                    路径。</p></li>
<li><p><code class="code">getLayers()</code>:
                    获得已注册的 layer 路径（定制）的列表。</p></li>
<li><p><code class="code">removeLayer($path)</code>:
                    从已注册的 layers （定制）列表里删除匹配 <code class="code">$path</code> 的 layer。
                    </p></li>
<li><p><code class="code">setCdnBase($url)</code>: 为  CDN 设置基础 URL；
                    一般地是
                    <code class="code">Zend_Dojo::CDN_BASE_AOL</code> 或
                    <code class="code">Zend_Dojo::CDN_BASE_GOOGLE</code> 其中之一，
                    但它只需要在版本号之前的 URL 字符串。
                    </p></li>
<li><p><code class="code">getCdnBase()</code>: 获取基础 CDN url
                     </p></li>
<li><p><code class="code">setCdnVersion($version = null)</code>:
                    从 CDN 设置 Dojo 的版本。
                    </p></li>
<li><p><code class="code">getCdnVersion()</code>:
                    从将要用的 CDN 获取 Dojo 的版本。
                    </p></li>
<li><p><code class="code">setCdnDojoPath($path)</code>:
                    在一个 CDN 中设置 dojo.js 或 dojo.xd.js 文件的相对路径 ；
                    一般地是 <code class="code">Zend_Dojo::CDN_DOJO_PATH_AOL</code> 或
                    <code class="code">Zend_Dojo::CDN_DOJO_PATH_GOOGLE</code> 其中之一，但
                    它只需要是带版本号的路径字符串。
                    </p></li>
<li><p><code class="code">getCdnDojoPath()</code>:
                    获取最后的 CDN url 指向 dojo.js文件的路径段。
                    </p></li>
<li><p><code class="code">useCdn()</code>:
                    告诉容器使用 CDN；显式地开启集成。
                    </p></li>
<li><p><code class="code">setLocalPath($path)</code>:
                    告诉容器指向本地 Dojo 安装（和服务器相关的路径，包括 dojo.js 文件自己）
                    的路径。显式地开启集成。
                    </p></li>
<li><p><code class="code">getLocalPath()</code>:
                    确定使用哪个本地 Dojo 路径。
                    </p></li>
<li><p><code class="code">useLocalPath()</code>:
                    是否集成使用 Dojo 本地路径？
                    </p></li>
<li><p><code class="code">setDjConfig(array $config)</code>:
                    设置 dojo/dijit 配置值（需要联合数组）。
                    </p></li>
<li><p><code class="code">setDjConfigOption($option, $value)</code>:
                    设置一单个的 dojo/dijit 配置值。
                    </p></li>
<li><p><code class="code">getDjConfig()</code>:
                    获取所有的 dojo/dijit 配置值。
                    </p></li>
<li><p><code class="code">getDjConfigOption($option, $default =
                    null)</code>:
                    获取一单个的 dojo/dijit 配置值。
                    </p></li>
<li><p><code class="code">addStylesheetModule($module)</code>:
                    基于模块主题添加风格。
                    </p></li>
<li><p><code class="code">getStylesheetModules()</code>:
                    获取注册为模块主题的风格。
                    </p></li>
<li><p><code class="code">addStylesheet($path)</code>:
                    添加一个本地风格来和 Dojo 一起使用。
                    </p></li>
<li><p><code class="code">getStylesheets()</code>:
                    获取本地 Dojo 风格。
                    </p></li>
<li><p><code class="code">addOnLoad($spec, $function = null)</code>:
                    为 dojo.onLoad 添加一个 lambda 来调用。如果传递一个参数，那就是
                    函数名或一个 javascript closure。如果传递两个参数，第一参数是
                    对象实例变量的名字，第二个参数是该对象的方法名或使用这个对象的
                    一个 closure。
                    </p></li>
<li><p><code class="code">getOnLoadActions()</code>:
                    获取所有用容器注册的 dojo.onLoad 动作，将是一个数组的数组。
                    </p></li>
<li><p><code class="code">onLoadCaptureStart($obj = null)</code>:
                    为 dojo.onLoad() 抓取用做 lambda 的数据。如果提供了 $obj，
                    那么 JS 抓取代码被认为是一个和 Javascript 对象一起使用的 closure 。
                    </p></li>
<li><p><code class="code">onLoadCaptureEnd($obj = null)</code>:
                    停止为使用 dojo.onLoad() 抓取数据。
                    </p></li>
<li><p><code class="code">javascriptCaptureStart()</code>:
                 抓取任意的 javascript 包含到 Dojo JS （onLoad、 require 等语句）。
                 </p></li>
<li><p><code class="code">javascriptCaptureEnd()</code>:
                  停止抓取 javascript。
                  </p></li>
<li><p><code class="code">__toString()</code>:
                    转换容器为字符串；解析所有的 HTMl 风格和脚本元素。
                    </p></li>
</ul></div>
</div>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.dojo.view.dijit"></a>17.3.2. Dijit-Specific 视图助手 </h3></div></div></div>
<p>
        引用一下 Dojo 手册：“Dijit 是基于 dojo 之上的一个小部件系统”，Dijit 有
        许多布局和表单小部件，用来提供访问、本地化和标准化（和可主题化）的观感。
    </p>
<p>
        Zend Framework 带有许多视图助手让你在视图脚本里解析和使用 dijits。有三个基本类型：
    </p>
<div class="itemizedlist"><ul type="disc">
<li>
<p>
                <span class="emphasis"><em>布局容器</em></span>:
                这些设计上在视图脚本理使用或由表单装饰器用于表单、子表单和显示组。
                它们封装了 dijit.layout 提供的各种类。每个 dijit 布局视图助手有下面的参数：
            </p>
<div class="itemizedlist"><ul type="circle">
<li><p>
                        <code class="code">$id</code>: 容器名或 DOM ID。
                </p></li>
<li><p>
                        <code class="code">$content</code>: 在布局容器里封装的内容。
                </p></li>
<li><p>
                        <code class="code">$params</code> (optional): dijit-specific 参数。
                        基本上是任何非 HTML 属性，可用于配置 dijit 布局容器。
                </p></li>
<li><p>
                        <code class="code">$attribs</code> （可选）：任何用于解析容器 div 的附加的 HTML 属性。
                        如果在这个数组里传递了键 'id'，它将被用于表单元素 DOM id，并且 <code class="code">$id</code>
                        将用于它的名字。
                </p></li>
</ul></div>
<p>
                如果不传递参数给 dijit 布局视图助手，那么助手将返回自己。
                它允许你抓取内容，通常是更容易的传递内容给布局容器的方法。
                本章的后面将用范例来示范这个功能。
            </p>
</li>
<li>
<p>
                <span class="emphasis"><em>Form Dijit</em></span>: dijit.form.Form dijit，虽然对于使用 dijit
                表单元素不是完全必要，但是它可以确保如果提交没有根据客户端校验而校验的表单时，
                提交就被终止并且产生校验错误消息。该表单 dijit 视图助手可带有下列参数：
            </p>
<div class="itemizedlist"><ul type="circle">
<li><p>
                        <code class="code">$id</code>: 容器名或 DOM ID。
                </p></li>
<li><p>
                        <code class="code">$attribs</code> （可选）：任何用于解析容器 div 的附加的 HTML 属性。
                </p></li>
<li><p>
                        <code class="code">$content</code> （可选）：要封装到表单的内容。如果没有，将使用空的字符串。
                </p></li>
</ul></div>
<p>
                为了和标准的 <code class="code">form()</code> 视图助手保持兼容，参数顺序和其它 dijit 有些不同。
            </p>
</li>
<li>
<p>
                <span class="emphasis"><em> 表单元素 </em></span>：设计上和 <code class="code">Zend_Form</code> 一起使用，但也
                可以在视图脚本中独立使用。每个 dijit 元素视图助手可以使用下列参数：
            </p>
<div class="itemizedlist"><ul type="circle">
<li><p>
                        <code class="code">$id</code>: 元素名或 DOM ID。
                </p></li>
<li><p>
                        <code class="code">$value</code> （可选）：元素的当前值。
                </p></li>
<li><p>
                        <code class="code">$params</code> （可选）： dijit-specific 参数。
                        基本上是任何用于配置 dijit 的非 HTML 属性。
                </p></li>
<li><p>
                        <code class="code">$attribs</code> （可选）：任何用于解析 dijit的附加的 HTML 属性。
                        如果键 'id' 在这个数组中传递，它将被用于表单元素的 DOM id，
                        并且 <code class="code">$id</code> 将被用于它的名字。
                </p></li>
</ul></div>
<p>
                一些元素要求更多的参数，将在个别元素助手的描述中注明。
            </p>
</li>
</ul></div>
<p>
        为了使用这些视图助手，你需要用视图对象来注册路径给 dojo 视图助手。
    </p>
<div class="example">
<a name="zend.dojo.view.dijit.prefixpath"></a><p class="title"><b>例 17.9.  注册 Dojo 视图助手前缀路径 </b></p>
<div class="example-contents"><pre class="programlisting">
$view-&gt;addHelperPath('Zend/Dojo/View/Helper', 'Zend_Dojo_View_Helper');
</pre></div>
</div>
<br class="example-break"><div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.dojo.view.dijit.layout"></a>17.3.2.1. Dijit 布局元素 </h4></div></div></div>
<p>
            dijit.layout 元素家族用来生成定制的、可预计的布局。任何关于用法的问题
            <a href="http://dojotoolkit.org/book/dojo-book-0-9/part-2-dijit/layout" target="_top">
            请阅读 Dojo 手册</a>。
        </p>
<p>
            所有的 dijit 布局元素都有签名 <code class="code">string ($id = null, $content = '', array $params =
                array(), array $attribs = array())</code>。
            对于所有情况，如果不传递参数，就返回助手对象自己。
            访问 <code class="code">captureStart()</code> 和 <code class="code">captureEnd()</code> 方法，它让你
            抓取内容而不是传递它给布局容器。
        </p>
<div class="itemizedlist"><ul type="disc">
<li>
<p>
                    <span class="emphasis"><em>AccordionContainer</em></span>：dijit.layout.AccordionContainer。
                    垂直堆放所有的 pane ，点击一个 pane 的 titlebar 就会展开并显示特定的 pane。
                </p>
<pre class="programlisting">
&lt;?= $view-&gt;accordionContainer(
    'foo',
    $content,
    array(
        'duration' =&gt; 200,
    ),
    array(
        'style' =&gt; 'width: 200px; height: 300px;',
    ),
); ?&gt;
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>AccordionPane</em></span>: dijit.layout.AccordionPane.
                    在 AccordionContainer 内使用。
                </p>
<pre class="programlisting">
&lt;?= $view-&gt;accordionPane(
    'foo',
    $content,
    array(
        'title' =&gt; 'Pane Title',
    ),
    array(
        'style' =&gt; 'background-color: lightgray;',
    ),
); ?&gt;
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>BorderContainer</em></span>：dijit.layout.BorderContainer。
                    用象传统程序中的可改变尺寸的 pane 来完成布局。
                </p>
<pre class="programlisting">
&lt;?= $view-&gt;borderContainer(
    'foo',
    $content,
    array(
        'design' =&gt; 'headline',
    ),
    array(
        'style' =&gt; 'width: 100%; height: 100%',
    ),
); ?&gt;
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>ContentPane</em></span>: dijit.layout.ContentPane。
                    用在除了 AccordionContainer 以外的任何容器内部。
                </p>
<pre class="programlisting">
&lt;?= $view-&gt;contentPane(
    'foo',
    $content,
    array(
        'title'  =&gt; 'Pane Title',
        'region' =&gt; 'left',
    ),
    array(
        'style' =&gt; 'width: 120px; background-color: lightgray;',
    ),
); ?&gt;
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>SplitContainer</em></span>：dijit.layout.SplitContainer。
                    允许可变尺寸的内容 pane；在 Dojo 里废除转而使用 BorderContainer。
                </p>
<pre class="programlisting">
&lt;?= $view-&gt;splitContainer(
    'foo',
    $content,
    array(
        'orientation'  =&gt; 'horizontal',
        'sizerWidth'   =&gt; 7,
        'activeSizing' =&gt; true,
    ),
    array(
        'style' =&gt; 'width: 400px; height: 500px;',
    ),
); ?&gt;
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>StackContainer</em></span>：dijit.layout.StackContainer。
                    所有在 StackContainer 里的 pane 放在一个堆栈里，生成按钮或功能一次显示一个。
                </p>
<pre class="programlisting">
&lt;?= $view-&gt;stackContainer(
    'foo',
    $content,
    array(),
    array(
        'style' =&gt; 'width: 400px; height: 500px; border: 1px;',
    ),
); ?&gt;
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>TabContainer</em></span>：dijit.layout.TabContainer。
                    所有在 TabContainer 里的 pane 放在一个堆栈里，并带有 tab 的位置，用于切换。
                </p>
<pre class="programlisting">
&lt;?= $view-&gt;stackContainer(
    'foo',
    $content,
    array(),
    array(
        'style' =&gt; 'width: 400px; height: 500px; border: 1px;',
    ),
); ?&gt;
</pre>
</li>
</ul></div>
<p>
            下列的抓取方法对所有的布局容器都可用：
        </p>
<div class="itemizedlist"><ul type="disc">
<li>
<p>
                    <code class="code">captureStart($id, array $params = array(), array $attribs = array())</code>：
                    开始抓取内容到容器。<code class="code">$params</code> 是和容器一起使用的 dijit 参数，
                    <code class="code">$attribs</code> 指的是任何一般的 HTML 属性。
                </p>
<p>
                    <span class="emphasis"><em> 只要 ids 没有重复 </em></span>，容器在抓取的时候可以嵌套。
                </p>
</li>
<li><p>
                    <code class="code">captureEnd($id)</code>：
                    完成抓取内容到容器。<code class="code">$id</code> 是指先前和  <code class="code">captureStart()</code>
                    调用一起使用的 id。返回一个字符串表示容器和它的内容，就好像传递内容给助手自己。
                </p></li>
</ul></div>
<div class="example">
<a name="zend.dojo.view.dijit.layout.borderexample"></a><p class="title"><b>例 17.10. BorderContainer 布局 dijit 范例</b></p>
<div class="example-contents">
<p>
                BorderContainers, 特别是当和抓取内容耦合时，对复杂的布局效果特别有用。
            </p>
<pre class="programlisting">
$view-&gt;borderContainer()-&gt;captureStart('masterLayout', array('design' =&gt; 'headline'));

echo $view-&gt;contentPane(
    'menuPane',
    'This is the menu pane',
    array('region' =&gt; 'top'),
    array('style' =&gt; 'background-color: darkblue;')
);

echo  $view-&gt;contentPane(
    'navPane',
    'This is the navigation pane',
    array('region' =&gt; 'left'),
    array('style' =&gt; 'width: 200px; background-color: lightblue;')
);

echo $view-&gt;contentPane(
    'mainPane',
    'This is the main content pane area',
    array('region' =&gt; 'center'),
    array('style' =&gt; 'background-color: white;')
);

echo $view-&gt;contentPane(
    'statusPane',
    'Status area',
    array('region' =&gt; 'bottom'),
    array('style' =&gt; 'background-color: lightgray;')
);

echo $view-&gt;borderContainer()-&gt;captureEnd('masterLayout');
</pre>
</div>
</div>
<br class="example-break">
</div>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.dojo.view.dijit.form"></a>17.3.2.2. Dijit 表单元素 </h4></div></div></div>
<p>
            Dojo 的表单校验和输入 dijit 在 dijit.form 树中。
            更多关于这些元素的一般用法和可接受的参数，请
            <a href="http://dojotoolkit.org/book/dojo-book-0-9/part-2-dijit/form-validation-specialized-input" target="_top">访问
                dijit.form 文档</a>.
        </p>
<p>
            下列 dijit 表单元素在 Zend Framework 里可用。
            除非注明，都有签名 <code class="code">string ($id,
                $value = '', array $params = array(), array $attribs =
                array())</code>.
        </p>
<div class="itemizedlist"><ul type="disc">
<li>
<p>
                    <span class="emphasis"><em>Button</em></span>: dijit.form.Button. 显示一个表单按钮
                </p>
<pre class="programlisting">
&lt;?= $view-&gt;button(
    'foo',
    'Show Me!',
    array('iconClass' =&gt; 'myButtons'),
); ?&gt;
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>CheckBox</em></span>：dijit.form.CheckBox.
                    显示一个 checkbox。接受可选的第五个参数，<code class="code">$checkedOptions</code> 数组，
                    包含：
                </p>
<div class="itemizedlist"><ul type="circle">
<li><p>
                            按顺序带两个值的索引数组，一个选中的值和一个未选中的值；或者
                    </p></li>
<li><p>
                            带键 'checkedValue' 和 'unCheckedValue'的联合数组。
                    </p></li>
</ul></div>
<p>
                    如果没有提供 <code class="code">$checkedOptions</code> 就假定为 1 和 0 。
                </p>
<pre class="programlisting">
&lt;?= $view-&gt;checkBox(
    'foo',
    'bar',
    array(),
    array(),
    array('checkedValue' =&gt; 'foo', 'unCheckedValue' =&gt; 'bar')
); ?&gt;
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>ComboBox</em></span>：dijit.layout.ComboBox.
                    组合框是一个混合体，包括选择框和带有自动完成的文字框。
                    关键是在列表里没有相应的选项的时候可以手工输入，而且是有效的。
                    它接受可选的第五个参数：联合数组 <code class="code">$options</code>；如果提供
                    了该参数，ComboBox 就当作 <code class="code">select</code> 被解析。也要注意
                    <code class="code">$options</code> 数组的 <span class="emphasis"><em>标签值</em></span> 在表单中返回，
                    而不选项值自己。
                </p>
<p>
                    另外，也可以传递关于和元素一起使用的 dojo.data 数据存储的信息。
                    如果提供该参数，ComboBox 就当作 <code class="code">input</code> 被解析，
                    并且将通过那个数据存储来取出它的选项。
                </p>
<p>
                    为了指定数据存储，请提供下列 <code class="code">$params</code> 键组合之一：
                </p>
<div class="itemizedlist"><ul type="circle">
<li>
<p>
                            键 'store'，带有一个数组值；数组应包含下列键：
                        </p>
<div class="itemizedlist"><ul type="square">
<li><p>
                                <span class="emphasis"><em>store</em></span>：表示数据存储的 javascript 变量名
                                （this could be the name you would like for it to use）。
                            </p></li>
<li><p>
                                <span class="emphasis"><em>type</em></span>：数据存储类型；例如：'dojo.data.ItemFileReadStore'。
                            </p></li>
<li><p>
                                <span class="emphasis"><em>params</em></span> （可选）：一个键/值对的联合数组，用来配置数据存储。
                                'url' 参数是个典型的例子。
                            </p></li>
</ul></div>
</li>
<li>
<p>
                            键：
                        </p>
<div class="itemizedlist"><ul type="square">
<li><p>
                                <span class="emphasis"><em>store</em></span>：表示数据存储名的字符串。
                            </p></li>
<li><p>
                                <span class="emphasis"><em>storeType</em></span>：表示数据存储 dojo.data 类型的字符传（例如 'dojo.data.ItemFileReadStore'）。
                            </p></li>
<li><p>
                                <span class="emphasis"><em>storeParams</em></span>：一个键/值对联合数组，用于配置数据存储。
                            </p></li>
</ul></div>
</li>
</ul></div>
<pre class="programlisting">
// As a select element:
echo $view-&gt;comboBox(
    'foo',
    'bar',
    array(
        'autocomplete' =&gt; false,
    ),
    array(),
    array(
        'foo' =&gt; 'Foo',
        'bar' =&gt; 'Bar',
        'baz' =&gt; 'Baz',
    )
);

// As a dojo.data-enabled element:
echo $view-&gt;comboBox(
    'foo',
    'bar',
    array(
        'autocomplete' =&gt; false,
        'store'        =&gt; 'stateStore',
        'storeType'    =&gt; 'dojo.data.ItemFileReadStore',
        'storeParams'  =&gt; array('url' =&gt; '/js/states.json'),
    ),
);
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>CurrencyTextBox</em></span>：dijit.form.CurrencyTextBox。
                    从 ValidationTextBox 继承，并提供货币的客户端校验。
                    它期望 dijit 参数 'currency' 的值是适当的三字符货币代码。
                    可以为 ValidationTextBox 和 TextBox 指定任何有效的 dijit 参数。
                </p>
<pre class="programlisting">
echo $view-&gt;currencyTextBox(
    'foo',
    '$25.00',
    array('currency' =&gt; 'USD'),
    array('maxlength' =&gt; 20)
);
</pre>
<div class="note"><table border="0" summary="Note: Issues with Builds">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">Issues with Builds</th>
</tr>
<tr><td align="left" valign="top">
<p>
                        目前有这些 <a href="http://trac.dojotoolkit.org/ticket/7183" target="_top">
                        和 build 层一起使用的 CurrencyTextBox 的已知问题
                        </a>.
                        一个解决办法是确保文档的 Content-Type http-equiv meta tag 把字符集设置为 utf-8，
                        可通过调用下列方法来完成：
                    </p>
<pre class="programlisting">
$view-&gt;headMeta()-&gt;appendHttpEquiv('Content-Type', 'text/html; charset=utf-8');
?&gt;</pre>
<p>
                        这当然意味着你需要确保 <code class="code">headMeta()</code> 占位符在布局脚本中。
                    </p>
</td></tr>
</table></div>
</li>
<li>
<p>
                    <span class="emphasis"><em>DateTextBox</em></span>：dijit.form.DateTextBox.
                    从 ValidationTextBox 继承，提供客户端的日期校验和下拉式日历。
                    你可以指定任何 dijit 可用的参数给 ValidationTextBox 或 TextBox。
                </p>
<pre class="programlisting">
echo $view-&gt;dateTextBox(
    'foo',
    '2008-07-11',
    array('required' =&gt; true)
);
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>FilteringSelect</em></span>：dijit.form.FilteringSelect。
                    和 ComboBox 类似，这是个选择/文字混合体，它可以从提供的选项列表
                    里读取或者从 dojo.data 数据存储里抓取。和 ComboBox 不一样的地方是
                    FilteringSelect 不允许输入不在列表里的选项。另外，它的操作和标准选择
                    一样，从选项值里选择而不是从标签里选择，当表单提交时返回它们。
                </p>
<p>
                    请参考上述关于 ComboBox 范例和定义数据存储的可用选项的信息。
                </p>
</li>
<li>
<p>
                    <span class="emphasis"><em>HorizontalSlider</em></span> 和
                    <span class="emphasis"><em>VerticalSlider</em></span>：
                    dijit.form.HorizontalSlider 和 dijit.form.VerticalSlider.
                    滑尺是 UI 小部件，用来在给定范围内选择数值的，这两个一个是水平的，一个是垂直的。
                </p>
<p>
                    至少，它们需要 dijit 参数
                    'minimum'、 'maximum' 和 'discreteValues'，来定义值的范围。
                    其它通用的选项有：
                </p>
<div class="itemizedlist"><ul type="circle">
<li><p>
                        'intermediateChanges' 用来表明当 handle 被拖的时候是否需要发出 onChange 事件。
                    </p></li>
<li><p>
                        'clickSelect' 用来允许在滑尺上点击来设置其值。
                    </p></li>
<li><p>
                        'pageIncrement' 通过 pageUp 和 pageDown 来增加/减少值。
                    </p></li>
<li><p>
                        'showButtons' 设置来允许在滑尺的一端显示按钮来操作数值。
                    </p></li>
</ul></div>
<p>
                    Zend Framework 实现生成一个隐藏的元素来存储滑尺的数值。
                </p>
<p>
                    你可以可选地为滑尺显示尺子或标签，可通过分配一个或多个 dijit 参数
                    'topDecoration' 和/或 'bottomDecoration'(水平滑尺） 或 'leftDecoration' 和/或
                    'rightDecoration' （垂直滑尺）来完成。它们有下列选项：
                </p>
<div class="itemizedlist"><ul type="circle">
<li><p>
                        <span class="emphasis"><em>container</em></span>：容器名称。
                    </p></li>
<li><p>
                        <span class="emphasis"><em>labels</em></span> （可选）：标签数组。
                        在滑尺的一端使用空字符串只为内部值提供标签。
                        当指定一个 'Labels' dijit 变量时必需。
                    </p></li>
<li><p>
                        <span class="emphasis"><em>dijit</em></span> （可选）：
                        HorizontalRule、HorizontalRuleLabels、 VerticalRule 或
                        VerticalRuleLabels 中的一个，缺省为尺子 dijits 之一。
                    </p></li>
<li>
<p>
                            <span class="emphasis"><em>params</em></span> （可选）：
                            配置尺子 dijit 的 dijit 参数，参数规范包括：
                        </p>
<div class="itemizedlist"><ul type="square">
<li><p>
                                <span class="emphasis"><em>container</em></span> （可选）：
                                尺子容器的属性和参数的数组。
                            </p></li>
<li><p>
                                <span class="emphasis"><em>labels</em></span> （可选）：
                                标签列表容器的属性和参数的数组。
                            </p></li>
</ul></div>
</li>
<li><p>
                        <span class="emphasis"><em>attribs</em></span> （可选）：
                        和尺子/标签一起使用的 HTML 属性，遵循  <code class="code">params</code> 选项格式并
                        且是一个带有键 'container' 和 'labels'  的联合数组。
                    </p></li>
</ul></div>
<pre class="programlisting">
echo $view-&gt;horizontalSlider(
    'foo',
    1,
    array(
        'minimum'             =&gt; -10,
        'maximum'             =&gt; 10,
        'discreteValues'      =&gt; 11,
        'intermediateChanges' =&gt; true,
        'showButtons'         =&gt; true,
        'topDecoration'       =&gt; array(
            'container' =&gt; 'topContainer'
            'dijit'     =&gt; 'HorizontalRuleLabels',
            'labels'    =&gt; array(
                ' ',
                '20%',
                '40%',
                '60%',
                '80%',
                ' ',
            ),
            'params' =&gt; array(
                'container' =&gt; array(
                    'style' =&gt; 'height:1.2em; font-size=75%;color:gray;',
                ),
                'labels' =&gt; array(
                    'style' =&gt; 'height:1em; font-size=75%;color:gray;',
                ),
            ),
        ),
        'bottomDecoration'    =&gt; array(
            'container' =&gt; 'bottomContainer'
            'labels'    =&gt; array(
                '0%',
                '50%',
                '100%',
            ),
            'params' =&gt; array(
                'container' =&gt; array(
                    'style' =&gt; 'height:1.2em; font-size=75%;color:gray;',
                ),
                'labels' =&gt; array(
                    'style' =&gt; 'height:1em; font-size=75%;color:gray;',
                ),
            ),
        ),
    )
);
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>NumberSpinner</em></span>：dijit.form.NumberSpinner。
                    数字输入文本框，按钮用来增减值。
                </p>
<p>
                    期望用于 dijit 参数 'constraints' 的联合数值或者键 'min'、'max' 和 'places'
                    （这些也期望 constraints 参数的条目）。
                    'places' 可用于指示微调数的增加和减少的数值。
                </p>
<pre class="programlisting">
echo $view-&gt;numberSpinner(
    'foo',
    5,
    array(
        'min'    =&gt; -10,
        'max'    =&gt; 10,
        'places' =&gt; 2,
    ),
    array(
        'maxlenth' =&gt; 3,
    )
);
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>NumberTextBox</em></span>：dijit.form.NumberTextBox。
                    NumberTextBox 可选地依靠给定的限制以本地化方式格式化和显示数字条目，同时也校验数字条目。
                </p>
<pre class="programlisting">
echo $view-&gt;numberTextBox(
    'foo',
    5,
    array(
        'places' =&gt; 4,
        'type'   =&gt; 'percent',
    ),
    array(
        'maxlength' =&gt; 20,
    )
);
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>PasswordTextBox</em></span>：
                    和密码输入相关的 dijit.form.ValidationTextBox。
                    PasswordTextBox 生成密码输入，并和当前的 dijit 主题匹配，同时也做客户端校验。
                </p>
<pre class="programlisting">
echo $view-&gt;passwordTextBox(
    'foo',
    '',
    array(
        'required' =&gt; true,
    ),
    array(
        'maxlength' =&gt; 20,
    )
);
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>RadioButton</em></span>：dijit.form.RadioButton。
                     一组选项，但只能选一个，除了视觉上和其它 dijits 保持一致，
                     其它方面都和普通的单选（radio，也叫无线电按钮）元素一样。
                </p>
<p>
                    RadioButton 接受可选的第五个参数，<code class="code">$options</code>，
                    是个联合数组，值/标签对用作radio选项。
                    你可以以 <code class="code">$attribs</code> 键 <code class="code">options</code> 来传递。
                </p>
<pre class="programlisting">
echo $view-&gt;radioButton(
    'foo',
    'bar',
    array(),
    array(),
    array(
        'foo' =&gt; 'Foo',
        'bar' =&gt; 'Bar',
        'baz' =&gt; 'Baz',
    )
);
</pre>
</li>
<li><p>
                    <span class="emphasis"><em>SubmitButton</em></span>：和提交元素相关的 dijit.form.Button。
                     参见按钮视图助手有更多的细节。主要的区别是这个按钮可以提交一个表单。
                </p></li>
<li>
<p>
                    <span class="emphasis"><em>Textarea</em></span>：dijit.form.Textarea.
                    除了有很多行以外，和普通的文本区域一样，它们按照用户类型来扩展。
                    宽度通过风格来设定。
                </p>
<pre class="programlisting">
echo $view-&gt;textarea(
    'foo',
    'Start writing here...',
    array(),
    array('style' =&gt; 'width: 300px;')
);
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>TextBox</em></span>：dijit.form.TextBox。
                    该元素主要用来在不同的 dijit 元素之间提供一个通用的外观，
                    并对其它 TextBox 派生的类 （ValidationTextBox、 NumberTextBox、 CurrencyTextBox、
                    DateTextBox 和 TimeTextBox）提供基本功能。
                </p>
<p>
                    普通的 dijit 参数标志包括 'lowercase' （转换成小写）、
                    'uppercase' （转换成大写）、
                    'propercase' （转换成合适的大小写）和 trim （修剪引导和拖尾的空白字符）；
                    它们都接受布尔值。另外，你可以指定参数 'size' 和 'maxLength'。
                </p>
<pre class="programlisting">
echo $view-&gt;textBox(
    'foo',
    'some text',
    array(
        'trim'       =&gt; true,
        'propercase' =&gt; true,
        'maxLength'  =&gt; 20,
    ),
    array(
        'size' =&gt; 20,
    )
);
</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>TimeTextBox</em></span>： dijit.form.TimeTextBox。
                    也包含在 TextBox 家族，TimeTextBox 提供一个下拉式时间选择器。
                    Dijit 参数让你指定可用的时间增量以及有效的时间的可见范围。
                </p>
<pre class="programlisting">
echo $view-&gt;timeTextBox(
    'foo',
    '',
    array(
        'am.pm'            =&gt; true,
        'visibleIncrement' =&gt; 'T00:05:00', // 5-minute increments
        'visibleRange'     =&gt; 'T02:00:00', // show 2 hours of increments
    ),
    array(
        'size' =&gt; 20,
    )
);

</pre>
</li>
<li>
<p>
                    <span class="emphasis"><em>ValidationTextBox</em></span>：dijit.form.ValidateTextBox。
                    为文本元素提供客户端校验。从 TextBox 继承。
                </p>
<p>
                    普通的 dijit 参数包括：
                </p>
<div class="itemizedlist"><ul type="circle">
<li><p>
                        <span class="emphasis"><em>invalidMessage</em></span>：当检测到一个无效的输入，就显示一条消息。
                    </p></li>
<li><p>
                        <span class="emphasis"><em>promptMessage</em></span>：工具提示帮助信息。
                    </p></li>
<li><p>
                        <span class="emphasis"><em>regExp</em></span>：用于校验文本的正则表达式，不需要边界记号。
                    </p></li>
<li><p>
                        <span class="emphasis"><em>required</em></span>：确定元素是否必需。如果需要就把元素嵌入
                         dijit.form.Form，它将被标记为无效并防止提交。
                    </p></li>
</ul></div>
<pre class="programlisting">
echo $view-&gt;validationTextBox(
    'foo',
    '',
    array(
        'required' =&gt; true,
        'regExp'   =&gt; '[\w]+',
        'invalidMessage' =&gt; 'No spaces or non-word characters allowed',
        'promptMessage'  =&gt; 'Single word consisting of alphanumeric characters and underscores only',
    ),
    array(
        'maxlength' =&gt; 20,
    )
);
</pre>
</li>
</ul></div>
</div>
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.dojo.data.html">上一页</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.dojo.html">上一级</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.dojo.form.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">17.2. Zend_Dojo_Data: dojo.data Envelopes </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top"> 17.4. Dojo 表单元素和装饰器 </td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
