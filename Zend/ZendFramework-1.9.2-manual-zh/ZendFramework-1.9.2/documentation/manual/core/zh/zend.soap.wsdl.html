<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>50.3. WSDL Accessor</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="Zend Framework手册 中文版">
<link rel="up" href="zend.soap.html" title="第 50 章 Zend_Soap">
<link rel="prev" href="zend.soap.client.html" title="50.2. Zend_Soap_Client">
<link rel="next" href="zend.soap.autodiscovery.html" title="50.4. AutoDiscovery">
<link rel="chapter" href="introduction.html" title="第 1 章 Zend Framework简介">
<link rel="chapter" href="zend.acl.html" title="第 2 章 Zend_Acl">
<link rel="chapter" href="zend.amf.html" title="第 3 章 Zend_Amf">
<link rel="chapter" href="zend.application.html" title="第 4 章 Zend_Application">
<link rel="chapter" href="zend.auth.html" title="第 5 章 Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="第 6 章 Zend_Cache">
<link rel="chapter" href="zend.captcha.html" title="第 7 章 Zend_Captcha">
<link rel="chapter" href="zend.codegenerator.html" title="第 8 章 Zend_CodeGenerator">
<link rel="chapter" href="zend.config.html" title="第 9 章 Zend_Config">
<link rel="chapter" href="zend.config.writer.html" title="第 10 章 Zend_Config_Writer">
<link rel="chapter" href="zend.console.getopt.html" title="第 11 章 Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="第 12 章 Zend_Controller">
<link rel="chapter" href="zend.currency.html" title="第 13 章 Zend_Currency">
<link rel="chapter" href="zend.date.html" title="第 14 章 Zend_Date">
<link rel="chapter" href="zend.db.html" title="第 15 章 Zend_Db">
<link rel="chapter" href="zend.debug.html" title="第 16 章 Zend_Debug">
<link rel="chapter" href="zend.dojo.html" title="第 17 章 Zend_Dojo">
<link rel="chapter" href="zend.dom.html" title="第 18 章 Zend_Dom">
<link rel="chapter" href="zend.exception.html" title="第 19 章 Zend_Exception">
<link rel="chapter" href="zend.feed.html" title="第 20 章 Zend_Feed">
<link rel="chapter" href="zend.file.html" title="第 21 章 Zend_File">
<link rel="chapter" href="zend.filter.html" title="第 22 章 Zend_Filter">
<link rel="chapter" href="zend.form.html" title="第 23 章 Zend_Form">
<link rel="chapter" href="zend.gdata.html" title="第 24 章 Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="第 25 章 Zend_Http">
<link rel="chapter" href="zend.infocard.html" title="第 26 章 Zend_InfoCard">
<link rel="chapter" href="zend.json.html" title="第 27 章 Zend_Json">
<link rel="chapter" href="zend.layout.html" title="第 28 章 Zend_Layout">
<link rel="chapter" href="zend.ldap.html" title="第 29 章 Zend_Ldap">
<link rel="chapter" href="zend.loader.html" title="第 30 章 Zend_Loader">
<link rel="chapter" href="zend.locale.html" title="第 31 章 Zend_Locale">
<link rel="chapter" href="zend.log.html" title="第 32 章 Zend_Log">
<link rel="chapter" href="zend.mail.html" title="第 33 章 Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="第 34 章 Zend_Measure">
<link rel="chapter" href="zend.memory.html" title="第 35 章 Zend_Memory">
<link rel="chapter" href="zend.mime.html" title="第 36 章 Zend_Mime">
<link rel="chapter" href="zend.navigation.html" title="第 37 章 Zend_Navigation">
<link rel="chapter" href="zend.openid.html" title="第 38 章 Zend_OpenId">
<link rel="chapter" href="zend.paginator.html" title="第 39 章 Zend_Paginator">
<link rel="chapter" href="zend.pdf.html" title="第 40 章 Zend_Pdf">
<link rel="chapter" href="zend.progressbar.html" title="第 41 章 Zend_ProgressBar">
<link rel="chapter" href="zend.queue.html" title="第 42 章 Zend_Queue">
<link rel="chapter" href="zend.reflection.html" title="第 43 章 Zend_Reflection">
<link rel="chapter" href="zend.registry.html" title="第 44 章 Zend_Registry">
<link rel="chapter" href="zend.rest.html" title="第 45 章 Zend_Rest">
<link rel="chapter" href="zend.search.lucene.html" title="第 46 章 Zend_Search_Lucene">
<link rel="chapter" href="zend.server.html" title="第 47 章 Zend_Server">
<link rel="chapter" href="zend.service.html" title="第 48 章 Zend_Service">
<link rel="chapter" href="zend.session.html" title="第 49 章 Zend_Session">
<link rel="chapter" href="zend.soap.html" title="第 50 章 Zend_Soap">
<link rel="chapter" href="zend.tag.html" title="第 51 章 Zend_Tag">
<link rel="chapter" href="zend.test.html" title="第 52 章 Zend_Test">
<link rel="chapter" href="zend.text.html" title="第 53 章 Zend_Text">
<link rel="chapter" href="zend.timesync.html" title="第 54 章 Zend_TimeSync">
<link rel="chapter" href="zend.tool.framework.html" title="第 55 章 Zend_Tool_Framework">
<link rel="chapter" href="zend.tool.project.html" title="第 56 章 Zend_Tool_Project">
<link rel="chapter" href="zend.translate.html" title="第 57 章 Zend_Translate">
<link rel="chapter" href="zend.uri.html" title="第 58 章 Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="第 59 章 Zend_Validate">
<link rel="chapter" href="zend.version.html" title="第 60 章 Zend_Version">
<link rel="chapter" href="zend.view.html" title="第 61 章 Zend_View">
<link rel="chapter" href="zend.wildfire.html" title="第 62 章 Zend_Wildfire">
<link rel="chapter" href="zend.xmlrpc.html" title="第 63 章 Zend_XmlRpc">
<link rel="chapter" href="zendx.console.process.unix.html" title="第 64 章 ZendX_Console_Process_Unix">
<link rel="chapter" href="zendx.jquery.html" title="第 65 章 ZendX_JQuery">
<link rel="appendix" href="requirements.html" title="附录 A. 系统需求">
<link rel="appendix" href="coding-standard.html" title="附录 B. Zend Framework 的 PHP 编码标准">
<link rel="appendix" href="doc-standard.html" title="附录 C. Zend Framework Documentation Standard">
<link rel="appendix" href="project-structure.html" title="附录 D. Recommended Project Structure for Zend Framework MVC Applications">
<link rel="appendix" href="performance.html" title="附录 E. Zend Framework Performance Guide">
<link rel="appendix" href="copyrights.html" title="附录 F. 版权信息">
<link rel="index" href="the.index.html" title="索引">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.constructor" title="50.3.1. Zend_Soap_Wsdl constructor">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.addmessage" title="50.3.2. addMessage() method">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.add_port_type" title="50.3.3. addPortType() method">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.add_port_operation" title="50.3.4. addPortOperation() method">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.add_binding" title="50.3.5. addBinding() method">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.add_binding_operation" title="50.3.6. addBindingOperation() method">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.add_soap_binding" title="50.3.7. addSoapBinding() method">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.add_soap_operation" title="50.3.8. addSoapOperation() method">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.add_service" title="50.3.9. addService() method">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.types" title="50.3.10. Type mapping">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.add_documentation" title="50.3.11. addDocumentation() method">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.retrieve" title="50.3.12. Get finalized WSDL document">
<link rel="subsection" href="zend.soap.wsdl.html#zend.soap.wsdl.parser" title="50.3.13. Parsing WSDL documents">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">50.3. WSDL Accessor</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.soap.client.html">上一页</a> </td>
<th width="60%" align="center">第 50 章 Zend_Soap</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.soap.autodiscovery.html">下一页</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.soap.wsdl"></a>50.3. WSDL Accessor</h2></div></div></div>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top">
<p>
            <code class="classname">Zend_Soap_Wsdl</code> class is used by <code class="classname">Zend_Soap_Server</code> component internally to operate with WSDL
            documents. Nevertheless, you could also use functionality provided by this class for your own needs.
            The <code class="classname">Zend_Soap_Wsdl</code> package contains both a parser and a builder of WSDL documents.
        </p>
<p>
            If you don't plan to do this, you can skip this documentation section.
        </p>
</td></tr>
</table></div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.constructor"></a>50.3.1. Zend_Soap_Wsdl constructor</h3></div></div></div>
<p>
            <code class="classname">Zend_Soap_Wsdl</code> constructor takes three parameters:
            </p>
<div class="orderedlist"><ol type="1">
<li>
<code class="varname">$name</code> - name of the Web Service being described.</li>
<li>
                        <code class="varname">$uri</code> - <acronym class="acronym">URI</acronym> where the WSDL will be available
                        (could also be a reference to the file in the filesystem.)
                    </li>
<li>
                        <code class="varname">$strategy</code> - optional flag used to identify the strategy for complex types (objects)
                        detection. This was a boolean <code class="varname">$extractComplexTypes</code> before version 1.7 and can
                        still be set as a boolean for backwards compatibility. By default the 1.6 detection behaviour
                        is set. To read more on complex type detection strategies go to the section:
                        <a href="zend.soap.wsdl.html#zend.soap.wsdl.types.add_complex" title="50.3.10.2. Adding complex type information">第 50.3.10.2 节 “Adding complex type information”</a>.
                    </li>
</ol></div>
<p>
        </p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.addmessage"></a>50.3.2. addMessage() method</h3></div></div></div>
<p>
            <code class="methodname">addMessage($name, $parts)</code> method adds new message description to the WSDL document
            (/definitions/message element).
        </p>
<p>
            Each message correspond to methods in terms of <code class="classname">Zend_Soap_Server</code> and
            <code class="classname">Zend_Soap_Client</code> functionality.
        </p>
<p>
           <code class="varname">$name</code> parameter represents message name.
        </p>
<p>
           <code class="varname">$parts</code> parameter is an array of message parts which describe <acronym class="acronym">SOAP</acronym> call parameters.
           It's an associative array: 'part name' (SOAP call parameter name) =&gt; 'part type'.
        </p>
<p>
            Type mapping management is performed using <code class="methodname">addTypes()</code>, <code class="methodname">addTypes()</code> and
            <code class="methodname">addComplexType()</code> methods (see below).
        </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top">
<p>
                Messages parts can use either 'element' or 'type' attribute for typing
                (see <a href="http://www.w3.org/TR/wsdl#_messages" target="_top">http://www.w3.org/TR/wsdl#_messages</a>).
            </p>
<p>
                'element' attribute must refer to a corresponding element of data type definition. 'type' attribute refers
                to a corresponding complexType entry.
            </p>
<p>
                All standard XSD types have both 'element' and 'complexType' definitions
                (see <a href="http://schemas.xmlsoap.org/soap/encoding/" target="_top">http://schemas.xmlsoap.org/soap/encoding/</a>).
            </p>
<p>
                All non-standard types, which may be added using <code class="methodname">Zend_Soap_Wsdl::addComplexType()</code> method, are
                described using 'complexType' node of '/definitions/types/schema/' section of WSDL document.
            </p>
<p>
                So <code class="methodname">addMessage()</code> method always uses 'type' attribute to describe types.
            </p>
</td></tr>
</table></div>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.add_port_type"></a>50.3.3. addPortType() method</h3></div></div></div>
<p>
            <code class="methodname">addPortType($name)</code> method adds new port type to the WSDL document
            (/definitions/portType) with the specified port type name.
        </p>
<p>
            It joins a set of Web Service methods defined in terms of <code class="classname">Zend_Soap_Server</code> implementation.
        </p>
<p>
            See <a href="http://www.w3.org/TR/wsdl#_porttypes" target="_top">http://www.w3.org/TR/wsdl#_porttypes</a> for the details.
        </p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.add_port_operation"></a>50.3.4. addPortOperation() method</h3></div></div></div>
<p>
            <code class="methodname">addPortOperation($portType, $name, $input = false, $output = false, $fault = false)</code> method
            adds new port operation to the specified port type of the WSDL document
            (/definitions/portType/operation).
        </p>
<p>
            Each port operation corresponds to a class method (if Web Service is based on a class) or function
            (if Web Service is based on a set of methods) in terms of <code class="classname">Zend_Soap_Server</code> implementation.
        </p>
<p>
            It also adds corresponding port operation messages depending on specified
            <code class="varname">$input</code>, <code class="varname">$output</code> and <code class="varname">$fault</code> parameters.

            </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top">
<p>
                    <code class="classname">Zend_Soap_Server</code> component generates two messages for each port operation while describing service based on
                    <code class="classname">Zend_Soap_Server</code> class:
                    </p>
<div class="itemizedlist"><ul type="disc">
<li><p>
                                input message with name <code class="code">$methodName . 'Request'</code>.
                            </p></li>
<li><p>
                                output message with name <code class="code">$methodName . 'Response'</code>.
                            </p></li>
</ul></div>
<p>
                </p>
</td></tr>
</table></div>
<p>
        </p>
<p>
            See <a href="http://www.w3.org/TR/wsdl#_request-response" target="_top">http://www.w3.org/TR/wsdl#_request-response</a> for the details.
        </p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.add_binding"></a>50.3.5. addBinding() method</h3></div></div></div>
<p>
            <code class="methodname">addBinding($name, $portType)</code> method adds new binding to the WSDL document (/definitions/binding).
        </p>
<p>
            'binding' WSDL document node defines message format and protocol details for operations and messages
            defined by a particular portType (see <a href="http://www.w3.org/TR/wsdl#_bindings" target="_top">http://www.w3.org/TR/wsdl#_bindings</a>).
        </p>
<p>
            The method creates binding node and returns it. Then it may be used to fill with actual data.
        </p>
<p>
            <code class="classname">Zend_Soap_Server</code> implementation uses <code class="code">$serviceName . 'Binding'</code> name for 'binding' element of WSDL document.
        </p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.add_binding_operation"></a>50.3.6. addBindingOperation() method</h3></div></div></div>
<p>
            <code class="methodname">addBindingOperation($binding, $name, $input = false, $output = false, $fault = false)</code> method adds
            an operation to a binding element (/definitions/binding/operation) with the specified name.
        </p>
<p>
            It takes <code class="code">XML_Tree_Node</code> object returned by <code class="methodname">addBinding()</code> as an input
            (<code class="varname">$binding</code> parameter) to add 'operation' element with input/output/false entries depending on
            specified parameters
        </p>
<p>
            <code class="classname">Zend_Soap_Server</code> implementation adds corresponding binding entry for each Web Service method with input and output
            entries defining 'soap:body' element as
            '&lt;soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/&gt;
        </p>
<p>
            See <a href="http://www.w3.org/TR/wsdl#_bindings" target="_top">http://www.w3.org/TR/wsdl#_bindings</a> for the details.
        </p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.add_soap_binding"></a>50.3.7. addSoapBinding() method</h3></div></div></div>
<p>
            <code class="methodname">addSoapBinding($binding, $style = 'document', $transport = 'http://schemas.xmlsoap.org/soap/http')</code>
            method adds <acronym class="acronym">SOAP</acronym> binding ('soap:binding') entry to the binding element (which is already linked to some port type)
            with the specified style and transport (Zend_Soap_Server implementation uses RPC style over <acronym class="acronym">HTTP</acronym>).
        </p>
<p>
            '/definitions/binding/soap:binding' element is used to signify that the binding is bound to the <acronym class="acronym">SOAP</acronym> protocol format.
        </p>
<p>
            See <a href="http://www.w3.org/TR/wsdl#_bindings" target="_top">http://www.w3.org/TR/wsdl#_bindings</a> for the details.
        </p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.add_soap_operation"></a>50.3.8. addSoapOperation() method</h3></div></div></div>
<p>
            <code class="methodname">addSoapOperation($binding, $soap_action)</code>
            method adds <acronym class="acronym">SOAP</acronym> operation ('soap:operation') entry to the binding element with the specified action.
            'style' attribute of the 'soap:operation' element is not used since programming model (RPC-oriented or document-oriented)
            may be using <code class="methodname">addSoapBinding()</code> method
        </p>
<p>
            'soapAction' attribute of '/definitions/binding/soap:operation' element specifies the value of the <acronym class="acronym">SOAP</acronym>Action header
            for this operation. This attribute is required for <acronym class="acronym">SOAP</acronym> over <acronym class="acronym">HTTP</acronym> and <span class="emphasis"><em>must not</em></span> be
            specified for other transports.
        </p>
<p>
            <code class="classname">Zend_Soap_Server</code> implementation uses <code class="code">$serviceUri . '#' . $methodName</code> for <acronym class="acronym">SOAP</acronym> operation action name.
        </p>
<p>
            See <a href="http://www.w3.org/TR/wsdl#_soap:operation" target="_top">http://www.w3.org/TR/wsdl#_soap:operation</a> for the details.
        </p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.add_service"></a>50.3.9. addService() method</h3></div></div></div>
<p>
            <code class="methodname">addService($name, $port_name, $binding, $location)</code> method adds '/definitions/service' element to
            the WSDL document with the specified Wed Service name, port name, binding, and location.
        </p>
<p>
            WSDL 1.1 allows to have several port types (sets of operations) per service. This ability is not used by
            <code class="classname">Zend_Soap_Server</code> implementation and not supported by <code class="classname">Zend_Soap_Wsdl</code> class.
        </p>
<p>
            <code class="classname">Zend_Soap_Server</code> implementation uses:
            </p>
<div class="itemizedlist"><ul type="disc">
<li><p>
                        <code class="code">$name . 'Service'</code> as a Web Service name,
                    </p></li>
<li><p>
                        <code class="code">$name . 'Port'</code> as a port type name,
                    </p></li>
<li><p>
                        <code class="code">'tns:' . $name . 'Binding'</code>
                            <sup>[<a name="id3040984" href="#ftn.id3040984">19</a>]</sup>
                            as binding name,
                    </p></li>
<li><p>
                        script <acronym class="acronym">URI</acronym><sup>[<a name="id3041014" href="#ftn.id3041014">20</a>]</sup>
                        as a service URI for Web Service definition using classes.
                    </p></li>
</ul></div>
<p>
            where <code class="varname">$name</code> is a class name for the Web Service definition mode using class and
            script name for the Web Service definition mode using set of functions.
        </p>
<p>
            See <a href="http://www.w3.org/TR/wsdl#_services" target="_top">http://www.w3.org/TR/wsdl#_services</a> for the details.
        </p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.types"></a>50.3.10. Type mapping</h3></div></div></div>
<p>
            <code class="classname">Zend_Soap</code> WSDL accessor implementation uses the following type mapping between <acronym class="acronym">PHP</acronym> and <acronym class="acronym">SOAP</acronym> types:

            </p>
<div class="itemizedlist"><ul type="disc">
<li><p>PHP strings &lt;-&gt; <code class="code">xsd:string</code>.</p></li>
<li><p>PHP integers &lt;-&gt; <code class="code">xsd:int</code>.</p></li>
<li><p>PHP floats and doubles &lt;-&gt; <code class="code">xsd:float</code>.</p></li>
<li><p>PHP booleans &lt;-&gt; <code class="code">xsd:boolean</code>.</p></li>
<li><p>PHP arrays &lt;-&gt; <code class="code">soap-enc:Array</code>.</p></li>
<li><p>PHP object &lt;-&gt; <code class="code">xsd:struct</code>.</p></li>
<li><p>
                        <acronym class="acronym">PHP</acronym> class &lt;-&gt; based on complex type strategy (See: <a href="zend.soap.wsdl.html#zend.soap.wsdl.types.add_complex" title="50.3.10.2. Adding complex type information">第 50.3.10.2 节 “Adding complex type information”</a>)
                        <sup>[<a name="id3041150" href="#ftn.id3041150">21</a>]</sup>.
                    </p></li>
<li><p>PHP void &lt;-&gt; empty type.</p></li>
<li><p>If type is not matched to any of these types by some reason, then <code class="code">xsd:anyType</code> is used.</p></li>
</ul></div>
<p>

            Where <code class="code">xsd:</code> is "http://www.w3.org/2001/XMLSchema" namespace,
            <code class="code">soap-enc:</code> is a "http://schemas.xmlsoap.org/soap/encoding/" namespace,
            <code class="code">tns:</code> is a "target namespace" for a service.
        </p>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.soap.wsdl.types.retrieve"></a>50.3.10.1. Retrieving type information</h4></div></div></div>
<p>
                <code class="methodname">getType($type)</code> method may be used to get mapping for a specified PHP type:

            </p>
<pre class="programlisting">
...
$wsdl = new Zend_Soap_Wsdl('My_Web_Service', $myWebServiceUri);

...
$soapIntType = $wsdl-&gt;getType('int');

...
class MyClass {
    ...
}
...
$soapMyClassType = $wsdl-&gt;getType('MyClass');
</pre>
<p>
            </p>
</div>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.soap.wsdl.types.add_complex"></a>50.3.10.2. Adding complex type information</h4></div></div></div>
<p>
                <code class="methodname">addComplexType($type)</code> method is used to add complex types (PHP classes) to a WSDL document.
            </p>
<p>
                It's automatically used by <code class="methodname">getType()</code> method to add corresponding complex types
                of method parameters or return types.
            </p>
<p>
                Its detection and building algorithm is based on the currently
                active detection strategy for complex types. You can set the detection strategy either by
                specifying the class name as string or instance of a <code class="classname">Zend_Soap_Wsdl_Strategy_Interface</code>
                implementation as the third parameter of the constructor or using the <code class="methodname">setComplexTypeStrategy($strategy)</code>
                function of <code class="classname">Zend_Soap_Wsdl</code>. The following detection strategies currently exist:
            </p>
<div class="itemizedlist"><ul type="disc">
<li><p>Class <code class="classname">Zend_Soap_Wsdl_Strategy_DefaultComplexType</code>: Enabled by default (when no
                    third constructor parameter is set). Iterates over the public attributes of a class type and
                    registers them as subtypes of the complex object type.</p></li>
<li><p>Class <code class="classname">Zend_Soap_Wsdl_Strategy_AnyType</code>: Casts all complex types into the
                    simple XSD type xsd:anyType. Be careful this shortcut for complex type detection can probably only
                    be handled successfully by weakly typed languages such as <acronym class="acronym">PHP</acronym>.
                    </p></li>
<li><p>Class <code class="classname">Zend_Soap_Wsdl_Strategy_ArrayOfTypeSequence</code>: This strategy allows
                    to specify return parameters of the type: <code class="code">int[]</code> or <code class="code">string[]</code>. As of
                    Zend Framework version 1.9 it can handle both simple <acronym class="acronym">PHP</acronym> types such as int, string, boolean, float
                    aswell as objects and arrays of objects.</p></li>
<li><p>Class <code class="classname">Zend_Soap_Wsdl_Strategy_ArrayOfTypeComplex</code>: This strategy allows
                    to detect very complex arrays of objects. Objects types are detected based on the
                    <code class="classname">Zend_Soap_Wsdl_Strategy_DefaultComplexType</code> and an array is wrapped
                    around that definition.</p></li>
<li><p>Class <code class="classname">Zend_Soap_Wsdl_Strategy_Composite</code>: This strategy can
                    combine all strategies by connecting <acronym class="acronym">PHP</acronym> Complex types (Classnames) to the desired strategy
                    via the <code class="methodname">connectTypeToStrategy($type, $strategy)</code> method. A complete typemap can be
                    given to the constructor as an array with <code class="varname">$type</code> -&gt; <code class="varname">$strategy</code> pairs.
                    The second parameter specifies the default strategy that will be used if an unknown type is
                    requested for adding. This parameter defaults to the <code class="classname">Zend_Soap_Wsdl_Strategy_DefaultComplexType</code>
                    strategy.</p></li>
</ul></div>
<p>
                <code class="methodname">addComplexType()</code> method creates '/definitions/types/xsd:schema/xsd:complexType' element for
                each described complex type with name of the specified <acronym class="acronym">PHP</acronym> class.
            </p>
<p>
                Class property <span class="emphasis"><em>MUST</em></span> have docblock section with the described <acronym class="acronym">PHP</acronym> type to have property
                included into WSDL description.
            </p>
<p>
                <code class="methodname">addComplexType()</code> checks if type is already described within types section of the WSDL document.
            </p>
<p>
                It prevents duplications if this method is called two or more times and recursion in the types definition
                section.
            </p>
<p>
                See <a href="http://www.w3.org/TR/wsdl#_types" target="_top">http://www.w3.org/TR/wsdl#_types</a> for the details.
            </p>
</div>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.add_documentation"></a>50.3.11. addDocumentation() method</h3></div></div></div>
<p>
            <code class="methodname">addDocumentation($input_node, $documentation)</code> method adds human readable documentation using
            optional 'wsdl:document' element.
        </p>
<p>
            '/definitions/binding/soap:binding' element is used to signify that the binding is bound to the <acronym class="acronym">SOAP</acronym> protocol format.
        </p>
<p>
            See <a href="http://www.w3.org/TR/wsdl#_documentation" target="_top">http://www.w3.org/TR/wsdl#_documentation</a> for the details.
        </p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.retrieve"></a>50.3.12. Get finalized WSDL document</h3></div></div></div>
<p>
            <code class="methodname">toXML()</code>, <code class="methodname">toDomDocument()</code> and <code class="methodname">dump($filename = false)</code> methods may be used to get
            WSDL document as an <acronym class="acronym">XML</acronym>, DOM structure or a file.
        </p>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.soap.wsdl.parser"></a>50.3.13. Parsing WSDL documents</h3></div></div></div>
<p>
            <code class="classname">Zend_Soap_Wsdl</code> also contains a parser for WSDL documents that has its main application in unit-testing and code-generation
            for <acronym class="acronym">SOAP</acronym> Webservices (Client and Server). The following example will show how the Parser can be used:
        </p>
<pre class="programlisting">
// Load WSDL into DOMDocument
$dom = new DOMDocument();
$dom-&gt;loadXML($wsdlString);

// Create parser
$parser = Zend_Soap_Wsdl_Parser::factory($dom);
$result = $parser-&gt;parse();

// Webservice Name
echo $result-&gt;getName();

// Access Ports and inner elements
foreach($result-&gt;ports AS $port) {
    echo $port-&gt;getName();
    foreach($port-&gt;bindings AS $binding) {
        echo $binding-&gt;getName();

        foreach($binding-&gt;operations AS $operation) {
            echo $operation-&gt;getName();
            echo $operation-&gt;inputMessage-&gt;getName();
            echo $operation-&gt;outputMessage-&gt;getName();
        }
    }
}
// You can access bindings, messages and operations
// and other elements directly too
foreach($result-&gt;operations AS $operation) {
    // do stuff
}
foreach($result-&gt;bindings AS $binding {
    // do stuff
}
foreach($result-&gt;messages AS $message) {
    // do stuff
}
foreach($result-&gt;services AS $service) {
    // do stuff
}
foreach($result-&gt;types AS $type) {
    // do stuff
}
</pre>
<p>All elements implement the interface <code class="classname">Zend_Soap_Wsdl_Element_Interface</code>
        that proxies a <code class="methodname">getName()</code> and a <code class="methodname">getDocumentation()</code> function with the
        unique identifier of the element and its documentation respectively. All the elements have
        public properties that describe its state in more detail and also contain their nested
        dependencies for easy iteratable access.</p>
</div>
<div class="footnotes">
<br><hr width="100" align="left">
<div class="footnote"><p><sup>[<a name="ftn.id3040984" href="#id3040984">19</a>] </sup>
                                    <code class="code">'tns:' namespace</code> is defined as script <acronym class="acronym">URI</acronym>
                                    (<code class="code">'http://' .$_SERVER['HTTP_HOST'] . $_SERVER['SCRIPT_NAME']</code>).
                                </p></div>
<div class="footnote"><p><sup>[<a name="ftn.id3041014" href="#id3041014">20</a>] </sup><code class="code">'http://' .$_SERVER['HTTP_HOST'] . $_SERVER['SCRIPT_NAME']</code></p></div>
<div class="footnote"><p><sup>[<a name="ftn.id3041150" href="#id3041150">21</a>] </sup>
                                By default <code class="classname">Zend_Soap_Wsdl</code> will be created with the <code class="classname">Zend_Soap_Wsdl_Strategy_DefaultComplexType</code>
                                class as detection algorithm for complex types. The first parameter of the AutoDiscover constructor takes
                                any complex type strategy implementing <code class="classname">Zend_Soap_Wsdl_Strategy_Interface</code> or a string with the name
                                of the class. For backwards compatibility with <code class="varname">$extractComplexType</code> boolean variables are parsed
                                the following way: If true, <code class="classname">Zend_Soap_Wsdl_Strategy_DefaultComplexType</code>, if false
                                <code class="classname">Zend_Soap_Wsdl_Strategy_AnyType</code>.
                            </p></div>
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.soap.client.html">上一页</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.soap.html">上一级</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.soap.autodiscovery.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">50.2. Zend_Soap_Client </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top"> 50.4. AutoDiscovery</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
