<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>48.8. Zend_Service_Amazon_Ec2: CloudWatch Monitoring</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="Zend Framework手册 中文版">
<link rel="up" href="zend.service.html" title="第 48 章 Zend_Service">
<link rel="prev" href="zend.service.amazon.ec2.reserved.instance.html" title="48.7. Zend_Service_Amazon_Ec2: Reserved Instances">
<link rel="next" href="zend.service.amazon.ec2.images.html" title="48.9. Zend_Service_Amazon_Ec2: Amazon Machine Images (AMI)">
<link rel="chapter" href="introduction.html" title="第 1 章 Zend Framework简介">
<link rel="chapter" href="zend.acl.html" title="第 2 章 Zend_Acl">
<link rel="chapter" href="zend.amf.html" title="第 3 章 Zend_Amf">
<link rel="chapter" href="zend.application.html" title="第 4 章 Zend_Application">
<link rel="chapter" href="zend.auth.html" title="第 5 章 Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="第 6 章 Zend_Cache">
<link rel="chapter" href="zend.captcha.html" title="第 7 章 Zend_Captcha">
<link rel="chapter" href="zend.codegenerator.html" title="第 8 章 Zend_CodeGenerator">
<link rel="chapter" href="zend.config.html" title="第 9 章 Zend_Config">
<link rel="chapter" href="zend.config.writer.html" title="第 10 章 Zend_Config_Writer">
<link rel="chapter" href="zend.console.getopt.html" title="第 11 章 Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="第 12 章 Zend_Controller">
<link rel="chapter" href="zend.currency.html" title="第 13 章 Zend_Currency">
<link rel="chapter" href="zend.date.html" title="第 14 章 Zend_Date">
<link rel="chapter" href="zend.db.html" title="第 15 章 Zend_Db">
<link rel="chapter" href="zend.debug.html" title="第 16 章 Zend_Debug">
<link rel="chapter" href="zend.dojo.html" title="第 17 章 Zend_Dojo">
<link rel="chapter" href="zend.dom.html" title="第 18 章 Zend_Dom">
<link rel="chapter" href="zend.exception.html" title="第 19 章 Zend_Exception">
<link rel="chapter" href="zend.feed.html" title="第 20 章 Zend_Feed">
<link rel="chapter" href="zend.file.html" title="第 21 章 Zend_File">
<link rel="chapter" href="zend.filter.html" title="第 22 章 Zend_Filter">
<link rel="chapter" href="zend.form.html" title="第 23 章 Zend_Form">
<link rel="chapter" href="zend.gdata.html" title="第 24 章 Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="第 25 章 Zend_Http">
<link rel="chapter" href="zend.infocard.html" title="第 26 章 Zend_InfoCard">
<link rel="chapter" href="zend.json.html" title="第 27 章 Zend_Json">
<link rel="chapter" href="zend.layout.html" title="第 28 章 Zend_Layout">
<link rel="chapter" href="zend.ldap.html" title="第 29 章 Zend_Ldap">
<link rel="chapter" href="zend.loader.html" title="第 30 章 Zend_Loader">
<link rel="chapter" href="zend.locale.html" title="第 31 章 Zend_Locale">
<link rel="chapter" href="zend.log.html" title="第 32 章 Zend_Log">
<link rel="chapter" href="zend.mail.html" title="第 33 章 Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="第 34 章 Zend_Measure">
<link rel="chapter" href="zend.memory.html" title="第 35 章 Zend_Memory">
<link rel="chapter" href="zend.mime.html" title="第 36 章 Zend_Mime">
<link rel="chapter" href="zend.navigation.html" title="第 37 章 Zend_Navigation">
<link rel="chapter" href="zend.openid.html" title="第 38 章 Zend_OpenId">
<link rel="chapter" href="zend.paginator.html" title="第 39 章 Zend_Paginator">
<link rel="chapter" href="zend.pdf.html" title="第 40 章 Zend_Pdf">
<link rel="chapter" href="zend.progressbar.html" title="第 41 章 Zend_ProgressBar">
<link rel="chapter" href="zend.queue.html" title="第 42 章 Zend_Queue">
<link rel="chapter" href="zend.reflection.html" title="第 43 章 Zend_Reflection">
<link rel="chapter" href="zend.registry.html" title="第 44 章 Zend_Registry">
<link rel="chapter" href="zend.rest.html" title="第 45 章 Zend_Rest">
<link rel="chapter" href="zend.search.lucene.html" title="第 46 章 Zend_Search_Lucene">
<link rel="chapter" href="zend.server.html" title="第 47 章 Zend_Server">
<link rel="chapter" href="zend.service.html" title="第 48 章 Zend_Service">
<link rel="chapter" href="zend.session.html" title="第 49 章 Zend_Session">
<link rel="chapter" href="zend.soap.html" title="第 50 章 Zend_Soap">
<link rel="chapter" href="zend.tag.html" title="第 51 章 Zend_Tag">
<link rel="chapter" href="zend.test.html" title="第 52 章 Zend_Test">
<link rel="chapter" href="zend.text.html" title="第 53 章 Zend_Text">
<link rel="chapter" href="zend.timesync.html" title="第 54 章 Zend_TimeSync">
<link rel="chapter" href="zend.tool.framework.html" title="第 55 章 Zend_Tool_Framework">
<link rel="chapter" href="zend.tool.project.html" title="第 56 章 Zend_Tool_Project">
<link rel="chapter" href="zend.translate.html" title="第 57 章 Zend_Translate">
<link rel="chapter" href="zend.uri.html" title="第 58 章 Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="第 59 章 Zend_Validate">
<link rel="chapter" href="zend.version.html" title="第 60 章 Zend_Version">
<link rel="chapter" href="zend.view.html" title="第 61 章 Zend_View">
<link rel="chapter" href="zend.wildfire.html" title="第 62 章 Zend_Wildfire">
<link rel="chapter" href="zend.xmlrpc.html" title="第 63 章 Zend_XmlRpc">
<link rel="chapter" href="zendx.console.process.unix.html" title="第 64 章 ZendX_Console_Process_Unix">
<link rel="chapter" href="zendx.jquery.html" title="第 65 章 ZendX_JQuery">
<link rel="appendix" href="requirements.html" title="附录 A. 系统需求">
<link rel="appendix" href="coding-standard.html" title="附录 B. Zend Framework 的 PHP 编码标准">
<link rel="appendix" href="doc-standard.html" title="附录 C. Zend Framework Documentation Standard">
<link rel="appendix" href="project-structure.html" title="附录 D. Recommended Project Structure for Zend Framework MVC Applications">
<link rel="appendix" href="performance.html" title="附录 E. Zend Framework Performance Guide">
<link rel="appendix" href="copyrights.html" title="附录 F. 版权信息">
<link rel="index" href="the.index.html" title="索引">
<link rel="subsection" href="zend.service.amazon.ec2.cloudwatch.html#zend.service.amazon.ec2.cloudwatch.usage" title="48.8.1. CloudWatch Usage">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">48.8. Zend_Service_Amazon_Ec2: CloudWatch Monitoring</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.service.amazon.ec2.reserved.instance.html">上一页</a> </td>
<th width="60%" align="center">第 48 章 Zend_Service</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.service.amazon.ec2.images.html">下一页</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.service.amazon.ec2.cloudwatch"></a>48.8. Zend_Service_Amazon_Ec2: CloudWatch Monitoring</h2></div></div></div>
<p>
        Amazon CloudWatch is an easy-to-use web service that provides
        comprehensive monitoring for Amazon Elastic Compute Cloud (Amazon
        <acronym class="acronym">EC2</acronym>) and Elastic Load Balancing. For more details information
        check cout the <a href="http://docs.amazonwebservices.com/AmazonCloudWatch/latest/DeveloperGuide/index.html?SvcIntro.html" target="_top">
            Amazon CloudWatch Developers Guide</a>
    </p>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.amazon.ec2.cloudwatch.usage"></a>48.8.1. CloudWatch Usage</h3></div></div></div>
<div class="example">
<a name="zend.service.amazon.ec2.cloudwatch.usage.list"></a><p class="title"><b>例 48.28. Listing Aviable Metrics</b></p>
<div class="example-contents">
<p>
                <code class="methodname">listMetrics()</code> returns a list of up to 500 valid metrics for
                which there is recorded data available to a you and a NextToken string
                that can be used to query for the next set of results.
            </p>
<pre class="programlisting">
$ec2_ebs = new Zend_Service_Amazon_Ec2_CloudWatch('aws_key','aws_secret_key');
$return = $ec2_ebs-&gt;listMetrics();
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.cloudwatch.usage.getmetricstatistics"></a><p class="title"><b>例 48.29. Return Statistics for a given metric</b></p>
<div class="example-contents">
<p>
                <code class="methodname">getMetricStatistics()</code> Returns data for one or more
                statistics of given a metric.
            </p>
<p>
                </p>
<div class="note"><table border="0" summary="Note">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">注意</th>
</tr>
<tr><td align="left" valign="top"><p>
                        The maximum number of datapoints that the Amazon CloudWatch service will
                        return in a single GetMetricStatistics request is 1,440. If a request is
                        made that would generate more datapoints than this amount, Amazon CloudWatch
                        will return an error. You can alter your request by narrowing the time range
                        (StartTime, EndTime) or increasing the Period in your single request. You
                        may also get all of the data at the granularity you originally asked for
                        by making multiple requests with adjacent time ranges.
                    </p></td></tr>
</table></div>
<p>
            </p>
<p>
                <code class="methodname">getMetricStatistics()</code> only requires two parameters but it
                also has four additional parameters that are optional.
            </p>
<div class="itemizedlist"><ul type="disc">
<li><p><span class="emphasis"><em>Required:</em></span></p></li>
<li><p>
                        <span class="emphasis"><em>MeasureName</em></span> The measure name that corresponds to
                        the measure for the gathered metric. Valid <acronym class="acronym">EC2</acronym> Values are
                        <acronym class="acronym">CPU</acronym>Utilization, NetworkIn, NetworkOut, DiskWriteOps
                        DiskReadBytes, DiskReadOps, DiskWriteBytes. Valid Elastic
                        Load Balancing Metrics are Latency, RequestCount, HealthyHostCount
                        UnHealthyHostCount. <a href="http://docs.amazonwebservices.com/AmazonCloudWatch/latest/DeveloperGuide/arch-AmazonCloudWatch-metricscollected.html" target="_top">
                            For more information click here</a>
                    </p></li>
<li><p>
                        <span class="emphasis"><em>Statistics</em></span> The statistics to be returned for the given
                        metric. Valid values are Average, Maximum, Minimum, Samples, Sum. You can
                        specify this as a string or as an array of values. If you don't specify one
                        it will default to Average instead of failing out. If you specify an
                        incorrect option it will just skip it. <a href="http://docs.amazonwebservices.com/AmazonCloudWatch/latest/DeveloperGuide/arch-Amazon-CloudWatch-statistics.html" target="_top">
                            For more information click here</a>
                    </p></li>
<li><p><span class="emphasis"><em>Optional:</em></span></p></li>
<li><p>
                        <span class="emphasis"><em>Dimensions</em></span> Amazon CloudWatch allows you to specify one
                        Dimension to further filter metric data on. If you don't specify a
                        dimension, the service returns the aggregate of all the measures with the
                        given measure name and time range.
                    </p></li>
<li><p>
                        <span class="emphasis"><em>Unit</em></span> The standard unit of Measurement for a given
                        Measure. Valid Values: Seconds, Percent, Bytes, Bits, Count, Bytes/Second,
                        Bits/Second, Count/Second, and None. Constraints: When using count/second
                        as the unit, you should use Sum as the statistic instead of Average.
                        Otherwise, the sample returns as equal to the number of requests
                        instead of the number of 60-second intervals. This will cause the Average
                        to always equals one when the unit is count/second.
                    </p></li>
<li><p>
                        <span class="emphasis"><em>StartTime</em></span> The timestamp of the first datapoint to
                        return, inclusive. For example, 2008-02-26T19:00:00+00:00. We round your
                        value down to the nearest minute. You can set your start time for more than
                        two weeks in the past. However, you will only get data for the past two
                        weeks. (in <acronym class="acronym">ISO</acronym> 8601 format). Constraints: Must be before EndTime.
                    </p></li>
<li><p>
                        <span class="emphasis"><em>EndTime</em></span> The timestamp to use for determining the last
                        datapoint to return. This is the last datapoint to fetch, exclusive. For
                        example, 2008-02-26T20:00:00+00:00 (in <acronym class="acronym">ISO</acronym> 8601 format).
                    </p></li>
</ul></div>
<pre class="programlisting">
$ec2_ebs = new Zend_Service_Amazon_Ec2_CloudWatch('aws_key','aws_secret_key');
$return = $ec2_ebs-&gt;getMetricStatistics(
                                     array('MeasureName' =&gt; 'NetworkIn',
                                           'Statistics' =&gt; array('Average')));
</pre>
</div>
</div>
<br class="example-break">
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.service.amazon.ec2.reserved.instance.html">上一页</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.service.html">上一级</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.service.amazon.ec2.images.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">48.7. Zend_Service_Amazon_Ec2: Reserved Instances </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top"> 48.9. Zend_Service_Amazon_Ec2: Amazon Machine Images (AMI)</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
