<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>21.4. Migrating from previous versions</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="Zend Framework手册 中文版">
<link rel="up" href="zend.file.html" title="第 21 章 Zend_File">
<link rel="prev" href="zend.file.transfer.filters.html" title="21.3. Filters for Zend_File_Transfer">
<link rel="next" href="zend.filter.html" title="第 22 章 Zend_Filter">
<link rel="chapter" href="introduction.html" title="第 1 章 Zend Framework简介">
<link rel="chapter" href="zend.acl.html" title="第 2 章 Zend_Acl">
<link rel="chapter" href="zend.amf.html" title="第 3 章 Zend_Amf">
<link rel="chapter" href="zend.application.html" title="第 4 章 Zend_Application">
<link rel="chapter" href="zend.auth.html" title="第 5 章 Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="第 6 章 Zend_Cache">
<link rel="chapter" href="zend.captcha.html" title="第 7 章 Zend_Captcha">
<link rel="chapter" href="zend.codegenerator.html" title="第 8 章 Zend_CodeGenerator">
<link rel="chapter" href="zend.config.html" title="第 9 章 Zend_Config">
<link rel="chapter" href="zend.config.writer.html" title="第 10 章 Zend_Config_Writer">
<link rel="chapter" href="zend.console.getopt.html" title="第 11 章 Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="第 12 章 Zend_Controller">
<link rel="chapter" href="zend.currency.html" title="第 13 章 Zend_Currency">
<link rel="chapter" href="zend.date.html" title="第 14 章 Zend_Date">
<link rel="chapter" href="zend.db.html" title="第 15 章 Zend_Db">
<link rel="chapter" href="zend.debug.html" title="第 16 章 Zend_Debug">
<link rel="chapter" href="zend.dojo.html" title="第 17 章 Zend_Dojo">
<link rel="chapter" href="zend.dom.html" title="第 18 章 Zend_Dom">
<link rel="chapter" href="zend.exception.html" title="第 19 章 Zend_Exception">
<link rel="chapter" href="zend.feed.html" title="第 20 章 Zend_Feed">
<link rel="chapter" href="zend.file.html" title="第 21 章 Zend_File">
<link rel="chapter" href="zend.filter.html" title="第 22 章 Zend_Filter">
<link rel="chapter" href="zend.form.html" title="第 23 章 Zend_Form">
<link rel="chapter" href="zend.gdata.html" title="第 24 章 Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="第 25 章 Zend_Http">
<link rel="chapter" href="zend.infocard.html" title="第 26 章 Zend_InfoCard">
<link rel="chapter" href="zend.json.html" title="第 27 章 Zend_Json">
<link rel="chapter" href="zend.layout.html" title="第 28 章 Zend_Layout">
<link rel="chapter" href="zend.ldap.html" title="第 29 章 Zend_Ldap">
<link rel="chapter" href="zend.loader.html" title="第 30 章 Zend_Loader">
<link rel="chapter" href="zend.locale.html" title="第 31 章 Zend_Locale">
<link rel="chapter" href="zend.log.html" title="第 32 章 Zend_Log">
<link rel="chapter" href="zend.mail.html" title="第 33 章 Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="第 34 章 Zend_Measure">
<link rel="chapter" href="zend.memory.html" title="第 35 章 Zend_Memory">
<link rel="chapter" href="zend.mime.html" title="第 36 章 Zend_Mime">
<link rel="chapter" href="zend.navigation.html" title="第 37 章 Zend_Navigation">
<link rel="chapter" href="zend.openid.html" title="第 38 章 Zend_OpenId">
<link rel="chapter" href="zend.paginator.html" title="第 39 章 Zend_Paginator">
<link rel="chapter" href="zend.pdf.html" title="第 40 章 Zend_Pdf">
<link rel="chapter" href="zend.progressbar.html" title="第 41 章 Zend_ProgressBar">
<link rel="chapter" href="zend.queue.html" title="第 42 章 Zend_Queue">
<link rel="chapter" href="zend.reflection.html" title="第 43 章 Zend_Reflection">
<link rel="chapter" href="zend.registry.html" title="第 44 章 Zend_Registry">
<link rel="chapter" href="zend.rest.html" title="第 45 章 Zend_Rest">
<link rel="chapter" href="zend.search.lucene.html" title="第 46 章 Zend_Search_Lucene">
<link rel="chapter" href="zend.server.html" title="第 47 章 Zend_Server">
<link rel="chapter" href="zend.service.html" title="第 48 章 Zend_Service">
<link rel="chapter" href="zend.session.html" title="第 49 章 Zend_Session">
<link rel="chapter" href="zend.soap.html" title="第 50 章 Zend_Soap">
<link rel="chapter" href="zend.tag.html" title="第 51 章 Zend_Tag">
<link rel="chapter" href="zend.test.html" title="第 52 章 Zend_Test">
<link rel="chapter" href="zend.text.html" title="第 53 章 Zend_Text">
<link rel="chapter" href="zend.timesync.html" title="第 54 章 Zend_TimeSync">
<link rel="chapter" href="zend.tool.framework.html" title="第 55 章 Zend_Tool_Framework">
<link rel="chapter" href="zend.tool.project.html" title="第 56 章 Zend_Tool_Project">
<link rel="chapter" href="zend.translate.html" title="第 57 章 Zend_Translate">
<link rel="chapter" href="zend.uri.html" title="第 58 章 Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="第 59 章 Zend_Validate">
<link rel="chapter" href="zend.version.html" title="第 60 章 Zend_Version">
<link rel="chapter" href="zend.view.html" title="第 61 章 Zend_View">
<link rel="chapter" href="zend.wildfire.html" title="第 62 章 Zend_Wildfire">
<link rel="chapter" href="zend.xmlrpc.html" title="第 63 章 Zend_XmlRpc">
<link rel="chapter" href="zendx.console.process.unix.html" title="第 64 章 ZendX_Console_Process_Unix">
<link rel="chapter" href="zendx.jquery.html" title="第 65 章 ZendX_JQuery">
<link rel="appendix" href="requirements.html" title="附录 A. 系统需求">
<link rel="appendix" href="coding-standard.html" title="附录 B. Zend Framework 的 PHP 编码标准">
<link rel="appendix" href="doc-standard.html" title="附录 C. Zend Framework Documentation Standard">
<link rel="appendix" href="project-structure.html" title="附录 D. Recommended Project Structure for Zend Framework MVC Applications">
<link rel="appendix" href="performance.html" title="附录 E. Zend Framework Performance Guide">
<link rel="appendix" href="copyrights.html" title="附录 F. 版权信息">
<link rel="index" href="the.index.html" title="索引">
<link rel="subsection" href="zend.file.transfer.migration.html#zend.file.transfer.migration.fromonenineonetooneten" title="21.4.1. Migrating from 1.9 to 1.10 or newer">
<link rel="subsection" href="zend.file.transfer.migration.html#zend.file.transfer.migration.fromonesixtooneseven" title="21.4.2. Migrating from 1.6 to 1.7 or newer">
<link rel="subsection" href="zend.file.transfer.migration.html#zend.file.transfer.migration.fromonesixonetoonesixtwo" title="21.4.3. Migrating from 1.6.1 to 1.6.2 or newer">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">21.4. Migrating from previous versions</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.file.transfer.filters.html">上一页</a> </td>
<th width="60%" align="center">第 21 章 Zend_File</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.filter.html">下一页</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.file.transfer.migration"></a>21.4. Migrating from previous versions</h2></div></div></div>
<p>
        The <acronym class="acronym">API</acronym> of <code class="classname">Zend_File_Transfer</code> has changed from time to time.
        If you started to use <code class="classname">Zend_File_Transfer</code> and it's subcomponents
        in earlier versions follow the guidelines below to migrate your scripts to
        use the new <acronym class="acronym">API</acronym>.
    </p>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.migration.fromonenineonetooneten"></a>21.4.1. Migrating from 1.9 to 1.10 or newer</h3></div></div></div>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.file.transfer.migration.fromonenineonetooneten.mimetype"></a>21.4.1.1. MimeType validation</h4></div></div></div>
<p>
                For security reasons we had to turn off the default fallback mechanism of the
                <code class="classname">MimeType</code>, <code class="classname">ExcludeMimeType</code>,
                <code class="classname">IsCompressed</code> and <code class="classname">IsImage</code> validators.
                This means, that if the <span class="emphasis"><em>fileInfo</em></span> or
                <span class="emphasis"><em>magicMime</em></span> extensions can not be found, the validation will
                always fail.
            </p>
<p>
                If you are in need of validation by using the <acronym class="acronym">HTTP</acronym> fields which
                are provided by the user then you can turn on this feature by using the
                <code class="methodname">enableHeaderCheck()</code> method.
            </p>
<div class="note"><table border="0" summary="Note: Security hint">
<tr>
<td rowspan="2" align="center" valign="top" width="25"><img alt="[注意]" src="images/note.png"></td>
<th align="left">Security hint</th>
</tr>
<tr><td align="left" valign="top"><p>
                    You should note that relying on the <acronym class="acronym">HTTP</acronym> fields, which are
                    provided by your user, is a security risk. They can easily be changed and could
                    allow your user to provide a malcious file.
                </p></td></tr>
</table></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonenineonetooneten.example"></a><p class="title"><b>例 21.33. Allow the usage of the HTTP fields</b></p>
<div class="example-contents"><pre class="programlisting">
// at initiation
$valid = new Zend_File_Transfer_Adapter_Http(array('headerCheck' =&gt; true);

// or afterwards
$valid-&gt;enableHeaderCheck();
</pre></div>
</div>
<br class="example-break">
</div>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven"></a>21.4.2. Migrating from 1.6 to 1.7 or newer</h3></div></div></div>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators"></a>21.4.2.1. Changes when using filters and validators</h4></div></div></div>
<p>
                As noted by users, the validators from <code class="classname">Zend_File_Transfer</code>
                do not work in conjunction with <code class="classname">Zend_Config</code> due to the fact
                that they have not used named arrays.
            </p>
<p>
                Therefor, all filters and validators for <code class="classname">Zend_File_Transfer</code>
                have been reworked. While the old signatures continue to work,
                they have been marked as deprecated, and will emit a <acronym class="acronym">PHP</acronym> notice
                asking you to fix them.
            </p>
<p>
                The following list shows you the changes you will have to do for proper
                usage of the parameters.
            </p>
<div class="sect4" lang="zh-cn">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.rename"></a>21.4.2.1.1. Filter: Rename</h5></div></div></div>
<div class="itemizedlist"><ul type="disc">
<li><p>
                        Old method <acronym class="acronym">API</acronym>: <code class="classname">Zend_Filter_File_Rename($oldfile, $newfile,
                            $overwrite)</code>
                    </p></li>
<li><p>
                        New method <acronym class="acronym">API</acronym>: <code class="methodname">Zend_Filter_File_Rename($options)</code>
                        where $options accepts the following array keys:
                        <span class="emphasis"><em>source</em></span> equals to $oldfile,
                        <span class="emphasis"><em>target</em></span> equals to $newfile,
                        <span class="emphasis"><em>overwrite</em></span> equals to $overwrite
                    </p></li>
</ul></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.rename.example"></a><p class="title"><b>例 21.34. Changes for the rename filter from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="programlisting">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addFilter('Rename',
                   array('/path/to/oldfile', '/path/to/newfile', true));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addFilter('Rename',
                   array('source' =&gt; '/path/to/oldfile',
                         'target' =&gt; '/path/to/newfile',
                         'overwrite' =&gt; true));
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect4" lang="zh-cn">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.count"></a>21.4.2.1.2. Validator: Count</h5></div></div></div>
<div class="itemizedlist"><ul type="disc">
<li><p>
                        Old method <acronym class="acronym">API</acronym>: <code class="methodname">Zend_Validate_File_Count($min, $max)</code>
                    </p></li>
<li><p>
                        New method <acronym class="acronym">API</acronym>: <code class="methodname">Zend_Validate_File_Count($options)</code>
                        where $options accepts the following array keys:
                        <span class="emphasis"><em>min</em></span> equals to $min,
                        <span class="emphasis"><em>max</em></span> equals to $max,
                    </p></li>
</ul></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.count.example"></a><p class="title"><b>例 21.35. Changes for the count validator from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="programlisting">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Count',
                      array(2, 3));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Count',
                      false,
                      array('min' =&gt; 2,
                            'max' =&gt; 3));
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect4" lang="zh-cn">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.extension"></a>21.4.2.1.3. Validator:Extension</h5></div></div></div>
<div class="itemizedlist"><ul type="disc">
<li><p>
                        Old method <acronym class="acronym">API</acronym>: <code class="classname">Zend_Validate_File_Extension($extension,
                            $case)</code>
                    </p></li>
<li><p>
                        New method <acronym class="acronym">API</acronym>:
                        <code class="methodname">Zend_Validate_File_Extension($options)</code> where $options
                        accepts the following array keys:
                        <span class="emphasis"><em>*</em></span> equals to $extension and can have any other key,
                        <span class="emphasis"><em>case</em></span> equals to $case,
                    </p></li>
</ul></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.extension.example"></a><p class="title"><b>例 21.36. Changes for the extension validator from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="programlisting">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Extension',
                      array('jpg,gif,bmp', true));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Extension',
                      false,
                      array('extension1' =&gt; 'jpg,gif,bmp',
                            'case' =&gt; true));
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect4" lang="zh-cn">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.filessize"></a>21.4.2.1.4. Validator: FilesSize</h5></div></div></div>
<div class="itemizedlist"><ul type="disc">
<li><p>
                        Old method <acronym class="acronym">API</acronym>: <code class="classname">Zend_Validate_File_FilesSize($min, $max,
                            $bytestring)</code>
                    </p></li>
<li><p>
                        New method <acronym class="acronym">API</acronym>:
                        <code class="methodname">Zend_Validate_File_FilesSize($options)</code> where $options
                        accepts the following array keys:
                        <span class="emphasis"><em>min</em></span> equals to $min,
                        <span class="emphasis"><em>max</em></span> equals to $max,
                        <span class="emphasis"><em>bytestring</em></span> equals to $bytestring
                    </p></li>
</ul></div>
<p>
                    Additionally, the <code class="methodname">useByteString()</code> method
                    signature has changed. It can only be used to test if the
                    validator is expecting to use byte strings in generated
                    messages. To set the value of the flag, use the
                    <code class="methodname">setUseByteString()</code> method.
                </p>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.filessize.example"></a><p class="title"><b>例 21.37. Changes for the filessize validator from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="programlisting">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('FilesSize',
                   array(100, 10000, true));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('FilesSize',
                      false,
                      array('min' =&gt; 100,
                            'max' =&gt; 10000,
                            'bytestring' =&gt; true));

// Example for 1.6
$upload-&gt;useByteString(true); // set flag

// Same example for 1.7
$upload-&gt;setUseByteSting(true); // set flag
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect4" lang="zh-cn">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.hash"></a>21.4.2.1.5. Validator: Hash</h5></div></div></div>
<div class="itemizedlist"><ul type="disc">
<li><p>
                        Old method <acronym class="acronym">API</acronym>: <code class="classname">Zend_Validate_File_Hash($hash,
                            $algorithm)</code>
                    </p></li>
<li><p>
                        New method <acronym class="acronym">API</acronym>: <code class="methodname">Zend_Validate_File_Hash($options)</code>
                        where $options accepts the following array keys:
                        <span class="emphasis"><em>*</em></span> equals to $hash and can have any other key,
                        <span class="emphasis"><em>algorithm</em></span> equals to $algorithm,
                    </p></li>
</ul></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.hash.example"></a><p class="title"><b>例 21.38. Changes for the hash validator from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="programlisting">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Hash',
                   array('12345', 'md5'));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Hash',
                      false,
                      array('hash1' =&gt; '12345',
                            'algorithm' =&gt; 'md5'));
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect4" lang="zh-cn">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.imagesize"></a>21.4.2.1.6. Validator: ImageSize</h5></div></div></div>
<div class="itemizedlist"><ul type="disc">
<li><p>
                        Old method <acronym class="acronym">API</acronym>: <code class="classname">Zend_Validate_File_ImageSize($minwidth,
                            $minheight, $maxwidth, $maxheight)</code>
                    </p></li>
<li><p>
                        New method <acronym class="acronym">API</acronym>:
                        <code class="methodname">Zend_Validate_File_FilesSize($options)</code> where $options
                        accepts the following array keys: <span class="emphasis"><em>minwidth</em></span> equals to
                        $minwidth, <span class="emphasis"><em>maxwidth</em></span> equals to $maxwidth,
                        <span class="emphasis"><em>minheight</em></span> equals to $minheight,
                        <span class="emphasis"><em>maxheight</em></span> equals to $maxheight,
                    </p></li>
</ul></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.imagesize.example"></a><p class="title"><b>例 21.39. Changes for the imagesize validator from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="programlisting">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('ImageSize',
                      array(10, 10, 100, 100));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('ImageSize',
                      false,
                      array('minwidth' =&gt; 10,
                            'minheight' =&gt; 10,
                            'maxwidth' =&gt; 100,
                            'maxheight' =&gt; 100));
</pre></div>
</div>
<br class="example-break">
</div>
<div class="sect4" lang="zh-cn">
<div class="titlepage"><div><div><h5 class="title">
<a name="zend.file.transfer.migration.fromonesixtooneseven.validators.size"></a>21.4.2.1.7. Validator: Size</h5></div></div></div>
<div class="itemizedlist"><ul type="disc">
<li><p>
                        Old method <acronym class="acronym">API</acronym>: <code class="classname">Zend_Validate_File_Size($min, $max,
                            $bytestring)</code>
                    </p></li>
<li><p>
                        New method <acronym class="acronym">API</acronym>: <code class="methodname">Zend_Validate_File_Size($options)</code>
                        where $options accepts the following array keys:
                        <span class="emphasis"><em>min</em></span> equals to $min,
                        <span class="emphasis"><em>max</em></span> equals to $max,
                        <span class="emphasis"><em>bytestring</em></span> equals to $bytestring
                    </p></li>
</ul></div>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetooneseven.validators.size.example"></a><p class="title"><b>例 21.40. Changes for the size validator from 1.6 to 1.7</b></p>
<div class="example-contents"><pre class="programlisting">
// Example for 1.6
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Size',
                      array(100, 10000, true));

// Same example for 1.7
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('Size',
                      false,
                      array('min' =&gt; 100,
                            'max' =&gt; 10000,
                            'bytestring' =&gt; true));
</pre></div>
</div>
<br class="example-break">
</div>
</div>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.file.transfer.migration.fromonesixonetoonesixtwo"></a>21.4.3. Migrating from 1.6.1 to 1.6.2 or newer</h3></div></div></div>
<div class="sect3" lang="zh-cn">
<div class="titlepage"><div><div><h4 class="title">
<a name="zend.file.transfer.migration.fromonesixonetoonesixtwo.validators"></a>21.4.3.1. Changes when using validators</h4></div></div></div>
<p>
                As noted by users, the validators from <code class="classname">Zend_File_Transfer</code>
                do not work the same way like the default ones from
                <code class="classname">Zend_Form</code>. <code class="classname">Zend_Form</code> allows the usage
                of a <code class="code">breakChainOnFailure</code> parameter which breaks the validation for all
                further validators when an validation error has occurred.
            </p>
<p>
                So we added this parameter also to all existing validators from
                <code class="classname">Zend_File_Transfer</code>.
            </p>
<div class="itemizedlist"><ul type="disc">
<li><p>
                    Old method <acronym class="acronym">API</acronym>: <code class="methodname">addValidator($validator, $options, $files)</code>.
                </p></li>
<li><p>
                    New method <acronym class="acronym">API</acronym>: <code class="code">addValidator($validator, $breakChainOnFailure, $options,
                        $files)</code>.
                </p></li>
</ul></div>
<p>
                To migrate your scripts to the new <acronym class="acronym">API</acronym>, simply add a <code class="constant">FALSE</code>
                after defining the wished validator.
            </p>
<div class="example">
<a name="zend.file.transfer.migration.fromonesixonetoonesixtwo.example"></a><p class="title"><b>例 21.41. How to change your file validators from 1.6.1 to 1.6.2</b></p>
<div class="example-contents"><pre class="programlisting">
// Example for 1.6.1
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('FilesSize', array('1B', '100kB'));

// Same example for 1.6.2 and newer
// Note the added boolean false
$upload = new Zend_File_Transfer_Adapter_Http();
$upload-&gt;addValidator('FilesSize', false, array('1B', '100kB'));
</pre></div>
</div>
<br class="example-break">
</div>
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.file.transfer.filters.html">上一页</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.file.html">上一级</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.filter.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">21.3. Filters for Zend_File_Transfer </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top"> 第 22 章 Zend_Filter</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
