<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>48.9. Zend_Service_Amazon_Ec2: Amazon Machine Images (AMI)</title>
<link rel="stylesheet" href="dbstyle.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="Zend Framework手册 中文版">
<link rel="up" href="zend.service.html" title="第 48 章 Zend_Service">
<link rel="prev" href="zend.service.amazon.ec2.cloudwatch.html" title="48.8. Zend_Service_Amazon_Ec2: CloudWatch Monitoring">
<link rel="next" href="zend.service.amazon.ec2.ebs.html" title="48.10. Zend_Service_Amazon_Ec2: Elastic Block Stroage (EBS)">
<link rel="chapter" href="introduction.html" title="第 1 章 Zend Framework简介">
<link rel="chapter" href="zend.acl.html" title="第 2 章 Zend_Acl">
<link rel="chapter" href="zend.amf.html" title="第 3 章 Zend_Amf">
<link rel="chapter" href="zend.application.html" title="第 4 章 Zend_Application">
<link rel="chapter" href="zend.auth.html" title="第 5 章 Zend_Auth">
<link rel="chapter" href="zend.cache.html" title="第 6 章 Zend_Cache">
<link rel="chapter" href="zend.captcha.html" title="第 7 章 Zend_Captcha">
<link rel="chapter" href="zend.codegenerator.html" title="第 8 章 Zend_CodeGenerator">
<link rel="chapter" href="zend.config.html" title="第 9 章 Zend_Config">
<link rel="chapter" href="zend.config.writer.html" title="第 10 章 Zend_Config_Writer">
<link rel="chapter" href="zend.console.getopt.html" title="第 11 章 Zend_Console_Getopt">
<link rel="chapter" href="zend.controller.html" title="第 12 章 Zend_Controller">
<link rel="chapter" href="zend.currency.html" title="第 13 章 Zend_Currency">
<link rel="chapter" href="zend.date.html" title="第 14 章 Zend_Date">
<link rel="chapter" href="zend.db.html" title="第 15 章 Zend_Db">
<link rel="chapter" href="zend.debug.html" title="第 16 章 Zend_Debug">
<link rel="chapter" href="zend.dojo.html" title="第 17 章 Zend_Dojo">
<link rel="chapter" href="zend.dom.html" title="第 18 章 Zend_Dom">
<link rel="chapter" href="zend.exception.html" title="第 19 章 Zend_Exception">
<link rel="chapter" href="zend.feed.html" title="第 20 章 Zend_Feed">
<link rel="chapter" href="zend.file.html" title="第 21 章 Zend_File">
<link rel="chapter" href="zend.filter.html" title="第 22 章 Zend_Filter">
<link rel="chapter" href="zend.form.html" title="第 23 章 Zend_Form">
<link rel="chapter" href="zend.gdata.html" title="第 24 章 Zend_Gdata">
<link rel="chapter" href="zend.http.html" title="第 25 章 Zend_Http">
<link rel="chapter" href="zend.infocard.html" title="第 26 章 Zend_InfoCard">
<link rel="chapter" href="zend.json.html" title="第 27 章 Zend_Json">
<link rel="chapter" href="zend.layout.html" title="第 28 章 Zend_Layout">
<link rel="chapter" href="zend.ldap.html" title="第 29 章 Zend_Ldap">
<link rel="chapter" href="zend.loader.html" title="第 30 章 Zend_Loader">
<link rel="chapter" href="zend.locale.html" title="第 31 章 Zend_Locale">
<link rel="chapter" href="zend.log.html" title="第 32 章 Zend_Log">
<link rel="chapter" href="zend.mail.html" title="第 33 章 Zend_Mail">
<link rel="chapter" href="zend.measure.html" title="第 34 章 Zend_Measure">
<link rel="chapter" href="zend.memory.html" title="第 35 章 Zend_Memory">
<link rel="chapter" href="zend.mime.html" title="第 36 章 Zend_Mime">
<link rel="chapter" href="zend.navigation.html" title="第 37 章 Zend_Navigation">
<link rel="chapter" href="zend.openid.html" title="第 38 章 Zend_OpenId">
<link rel="chapter" href="zend.paginator.html" title="第 39 章 Zend_Paginator">
<link rel="chapter" href="zend.pdf.html" title="第 40 章 Zend_Pdf">
<link rel="chapter" href="zend.progressbar.html" title="第 41 章 Zend_ProgressBar">
<link rel="chapter" href="zend.queue.html" title="第 42 章 Zend_Queue">
<link rel="chapter" href="zend.reflection.html" title="第 43 章 Zend_Reflection">
<link rel="chapter" href="zend.registry.html" title="第 44 章 Zend_Registry">
<link rel="chapter" href="zend.rest.html" title="第 45 章 Zend_Rest">
<link rel="chapter" href="zend.search.lucene.html" title="第 46 章 Zend_Search_Lucene">
<link rel="chapter" href="zend.server.html" title="第 47 章 Zend_Server">
<link rel="chapter" href="zend.service.html" title="第 48 章 Zend_Service">
<link rel="chapter" href="zend.session.html" title="第 49 章 Zend_Session">
<link rel="chapter" href="zend.soap.html" title="第 50 章 Zend_Soap">
<link rel="chapter" href="zend.tag.html" title="第 51 章 Zend_Tag">
<link rel="chapter" href="zend.test.html" title="第 52 章 Zend_Test">
<link rel="chapter" href="zend.text.html" title="第 53 章 Zend_Text">
<link rel="chapter" href="zend.timesync.html" title="第 54 章 Zend_TimeSync">
<link rel="chapter" href="zend.tool.framework.html" title="第 55 章 Zend_Tool_Framework">
<link rel="chapter" href="zend.tool.project.html" title="第 56 章 Zend_Tool_Project">
<link rel="chapter" href="zend.translate.html" title="第 57 章 Zend_Translate">
<link rel="chapter" href="zend.uri.html" title="第 58 章 Zend_Uri">
<link rel="chapter" href="zend.validate.html" title="第 59 章 Zend_Validate">
<link rel="chapter" href="zend.version.html" title="第 60 章 Zend_Version">
<link rel="chapter" href="zend.view.html" title="第 61 章 Zend_View">
<link rel="chapter" href="zend.wildfire.html" title="第 62 章 Zend_Wildfire">
<link rel="chapter" href="zend.xmlrpc.html" title="第 63 章 Zend_XmlRpc">
<link rel="chapter" href="zendx.console.process.unix.html" title="第 64 章 ZendX_Console_Process_Unix">
<link rel="chapter" href="zendx.jquery.html" title="第 65 章 ZendX_JQuery">
<link rel="appendix" href="requirements.html" title="附录 A. 系统需求">
<link rel="appendix" href="coding-standard.html" title="附录 B. Zend Framework 的 PHP 编码标准">
<link rel="appendix" href="doc-standard.html" title="附录 C. Zend Framework Documentation Standard">
<link rel="appendix" href="project-structure.html" title="附录 D. Recommended Project Structure for Zend Framework MVC Applications">
<link rel="appendix" href="performance.html" title="附录 E. Zend Framework Performance Guide">
<link rel="appendix" href="copyrights.html" title="附录 F. 版权信息">
<link rel="index" href="the.index.html" title="索引">
<link rel="subsection" href="zend.service.amazon.ec2.images.html#zend.service.amazon.ec2.images.info" title="48.9.1. AMI Information Utilities">
<link rel="subsection" href="zend.service.amazon.ec2.images.html#zend.service.amazon.ec2.images.attribute" title="48.9.2. AMI Attribute Utilities">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div class="navheader"><table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">48.9. Zend_Service_Amazon_Ec2: Amazon Machine Images (AMI)</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="zend.service.amazon.ec2.cloudwatch.html">上一页</a> </td>
<th width="60%" align="center">第 48 章 Zend_Service</th>
<td width="20%" align="right"> <a accesskey="n" href="zend.service.amazon.ec2.ebs.html">下一页</a>
</td>
</tr>
</table></div>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="zend.service.amazon.ec2.images"></a>48.9. Zend_Service_Amazon_Ec2: Amazon Machine Images (AMI)</h2></div></div></div>
<p>
        Amazon Machine Images (AMIs) are preconfigured with an ever-growing list
        of operating systems.
    </p>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.amazon.ec2.images.info"></a>48.9.1. AMI Information Utilities</h3></div></div></div>
<div class="example">
<a name="zend.service.amazon.ec2.images.register"></a><p class="title"><b>例 48.30. Register an AMI with EC2</b></p>
<div class="example-contents">
<p>
                <code class="code">register</code> Each <acronym class="acronym">AMI</acronym> is associated with an unique ID which
                is provided by the Amazon EC2 service through the RegisterImage
                operation. During registration, Amazon EC2 retrieves the specified
                image manifest from Amazon S3 and verifies that the image is owned by
                the user registering the image.
            </p>
<p>
                <code class="code">register</code> returns the imageId for the registered Image.
            </p>
<pre class="programlisting">
$ec2_img = new Zend_Service_Amazon_Ec2_Image('aws_key','aws_secret_key');
$ip = $ec2_img-&gt;register('imageLocation');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.images.deregister"></a><p class="title"><b>例 48.31. Deregister an AMI with EC2</b></p>
<div class="example-contents">
<p>
                <code class="code">deregister</code>, Deregisters an <acronym class="acronym">AMI</acronym>. Once deregistered, instances
                of the <acronym class="acronym">AMI</acronym> can no longer be launched.
            </p>
<p>
                <code class="code">deregister</code> returns boolean true or false.
            </p>
<pre class="programlisting">
$ec2_img = new Zend_Service_Amazon_Ec2_Image('aws_key','aws_secret_key');
$ip = $ec2_img-&gt;deregister('imageId');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.images.describe"></a><p class="title"><b>例 48.32. Describe an AMI</b></p>
<div class="example-contents">
<p>
                <code class="code">describe</code> Returns information about <acronym class="acronym">AMI</acronym>s, AKIs, and ARIs
                available to the user. Information returned includes image type,
                product codes, architecture, and kernel and <acronym class="acronym">RAM</acronym> disk IDs. Images
                available to the user include public images available for any user
                to launch, private images owned by the user making the request,
                and private images owned by other users for which the user has
                explicit launch permissions.
            </p>
<p>
            </p>
<div class="table">
<a name="zend.service.amazon.ec2.images.describe-table"></a><p class="title"><b>表 48.12. Launch permissions fall into three categories</b></p>
<div class="table-contents"><table summary="Launch permissions fall into three categories" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>Name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code class="code">public</code></td>
<td><p>
                                The owner of the <acronym class="acronym">AMI</acronym> granted launch permissions for the <acronym class="acronym">AMI</acronym>
                                to the all group. All users have launch permissions for these <code class="constant">AMIs</code>.
                            </p></td>
</tr>
<tr>
<td><code class="code">explicit</code></td>
<td><p>
                                The owner of the <acronym class="acronym">AMI</acronym> granted launch permissions to a specific user.
                            </p></td>
</tr>
<tr>
<td><code class="code">implicit</code></td>
<td><p>
                                A user has implicit launch permissions for all <code class="constant">AMIs</code> he or she owns.
                            </p></td>
</tr>
</tbody>
</table></div>
</div>
<p><br class="table-break">
            </p>
<p>
                The list of <acronym class="acronym">AMI</acronym>s returned can be modified by specifying <acronym class="acronym">AMI</acronym> IDs, <acronym class="acronym">AMI</acronym> owners,
                or users with launch permissions. If no options are specified, Amazon EC2 returns
                all <acronym class="acronym">AMI</acronym>s for which the user has launch permissions.
            </p>
<p>
                If you specify one or more <acronym class="acronym">AMI</acronym> IDs, only <acronym class="acronym">AMI</acronym>s that have the specified IDs are returned.
                If you specify an invalid <acronym class="acronym">AMI</acronym> ID, a fault is returned. If you specify an <acronym class="acronym">AMI</acronym> ID for which
                you do not have access, it will not be included in the returned results.
            </p>
<p>
                If you specify one or more <acronym class="acronym">AMI</acronym> owners, only <acronym class="acronym">AMI</acronym>s from the specified owners and for
                which you have access are returned. The results can include the account IDs of the
                specified owners, amazon for <acronym class="acronym">AMI</acronym>s owned by Amazon or self for <acronym class="acronym">AMI</acronym>s that you own.
            </p>
<p>
                If you specify a list of executable users, only users that have launch permissions
                for the <acronym class="acronym">AMI</acronym>s are returned. You can specify account IDs (if you own the <acronym class="acronym">AMI</acronym>(s)), self
                for <acronym class="acronym">AMI</acronym>s for which you own or have explicit permissions, or all for public <acronym class="acronym">AMI</acronym>s.
            </p>
<p>
                <code class="code">describe</code> returns an array for all the images that match the critera that was
                passed in. The array contains the imageId, imageLocation, imageState, imageOwnerId, isPublic,
                architecture, imageType, kernelId, ramdiskId and platform.
            </p>
<pre class="programlisting">
$ec2_img = new Zend_Service_Amazon_Ec2_Image('aws_key','aws_secret_key');
$ip = $ec2_img-&gt;describe();
</pre>
</div>
</div>
<br class="example-break">
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="zend.service.amazon.ec2.images.attribute"></a>48.9.2. AMI Attribute Utilities</h3></div></div></div>
<div class="example">
<a name="zend.service.amazon.ec2.images.attribute.modify"></a><p class="title"><b>例 48.33. Modify Image Attributes</b></p>
<div class="example-contents">
<p>Modifies an attribute of an <acronym class="acronym">AMI</acronym></p>
<p>
            </p>
<div class="table">
<a name="zend.service.amazon.ec2.images.attribute.modify-table"></a><p class="title"><b>表 48.13. Valid Attributes</b></p>
<div class="table-contents"><table summary="Valid Attributes" border="1">
<colgroup>
<col>
<col>
</colgroup>
<thead><tr>
<th>Name</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><code class="code">launchPermission</code></td>
<td>
<p>
                                Controls who has permission to launch the <acronym class="acronym">AMI</acronym>. Launch permissions
                                can be granted to specific users by adding userIds.
                            </p>
<p>To make the <acronym class="acronym">AMI</acronym> public, add the all group.</p>
</td>
</tr>
<tr>
<td><code class="code">productCodes</code></td>
<td><p>
                                Associates a product code with <code class="constant">AMIs</code>. This allows developers to
                                charge users for using <code class="constant">AMIs</code>. The user must be signed up for the
                                product before they can launch the <acronym class="acronym">AMI</acronym>.
                                <span class="emphasis"><em>This is a write once attribute;
                                after it is set, it cannot be changed or
                                removed.</em></span>
                            </p></td>
</tr>
</tbody>
</table></div>
</div>
<p><br class="table-break">
            </p>
<p>
                <code class="code">modifyAttribute</code> returns boolean true or false.
            </p>
<pre class="programlisting">
$ec2_img = new Zend_Service_Amazon_Ec2_Image('aws_key','aws_secret_key');
// modify the launchPermission of an AMI
$return = $ec2_img-&gt;modifyAttribute('imageId',
                                    'launchPermission',
                                    'add',
                                    'userId',
                                    'userGroup');

// set the product code of the AMI.
$return = $ec2_img-&gt;modifyAttribute('imageId',
                                    'productCodes',
                                    'add',
                                    null,
                                    null,
                                    'productCode');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.images.attribute.reset"></a><p class="title"><b>例 48.34. Reset an AMI Attribute</b></p>
<div class="example-contents">
<p>
                <code class="code">resetAttribute</code> will reset the attribute of an <acronym class="acronym">AMI</acronym> to its default value.
                <span class="emphasis"><em>The productCodes attribute cannot be reset.</em></span>
            </p>
<pre class="programlisting">
$ec2_img = new Zend_Service_Amazon_Ec2_Image('aws_key','aws_secret_key');
$return = $ec2_img-&gt;resetAttribute('imageId', 'launchPermission');
</pre>
</div>
</div>
<br class="example-break"><div class="example">
<a name="zend.service.amazon.ec2.images.attribute.describe"></a><p class="title"><b>例 48.35. Describe AMI Attribute</b></p>
<div class="example-contents">
<p>
                <code class="code">describeAttribute</code> returns information about an attribute of an <acronym class="acronym">AMI</acronym>.
                Only one attribute can be specified per call. Currently only launchPermission and
                productCodes are supported.
            </p>
<p>
                <code class="code">describeAttribute</code> returns an array with the value of the attribute
                that was requested.
            </p>
<pre class="programlisting">
$ec2_img = new Zend_Service_Amazon_Ec2_Image('aws_key','aws_secret_key');
$return = $ec2_img-&gt;describeAttribute('imageId', 'launchPermission');
</pre>
</div>
</div>
<br class="example-break">
</div>
</div>
<div class="navfooter"><table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="zend.service.amazon.ec2.cloudwatch.html">上一页</a> </td>
<td width="20%" align="center"><a accesskey="u" href="zend.service.html">上一级</a></td>
<td width="40%" align="right"> <a accesskey="n" href="zend.service.amazon.ec2.ebs.html">下一页</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">48.8. Zend_Service_Amazon_Ec2: CloudWatch Monitoring </td>
<td width="20%" align="center"><a accesskey="h" href="index.html">起始页</a></td>
<td width="40%" align="right" valign="top"> 48.10. Zend_Service_Amazon_Ec2: Elastic Block Stroage (EBS)</td>
</tr>
</table></div>
<div class="revinfo"></div>
</body>
</html>
